{{Array.typeTag___='Array';Object.typeTag___='Object';String.typeTag___='String';Boolean.typeTag___='Boolean';Number.typeTag___='Number';Date.typeTag___='Date';RegExp.typeTag___='RegExp';Error.typeTag___='Error';EvalError.typeTag___='EvalError';RangeError.typeTag___='RangeError';ReferenceError.typeTag___='ReferenceError';SyntaxError.typeTag___='SyntaxError';TypeError.typeTag___='TypeError';URIError.typeTag___='URIError';function
dateToISOString(){function f(n){return n<10?'0'+n:n;}return this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z';}if(Date.prototype.toISOString===void
0){Date.prototype.toISOString=dateToISOString;}if(Date.prototype.toJSON===void 0){Date.prototype.toJSON=Date.prototype.toISOString;}function
arraySlice(self,start,end){return Array.prototype.slice.call(self,start||0,end||self.length);}if(Array.slice===void
0){Array.slice=arraySlice;}function funcBind(self,var_args){var thisFunc=this;var
leftArgs=Array.slice(arguments,1);function funcBound(var_args){var args=leftArgs.concat(Array.slice(arguments,0));return thisFunc.apply(self,args);};return funcBound;}if(Function.prototype.bind===void
0){Function.prototype.bind=funcBind;}var cajita;var ___;(function(global){function
ToInt32(alleged_int){return alleged_int>>0;}function ToUInt32(alleged_int){return alleged_int>>>0;}function
arrayIndexOf(specimen,i){var len=ToUInt32(this.length);i=ToInt32(i);if(i<0){if((i+=len)<0){i=0;}}for(;i<len;++i){if(i
in this&&identical(this[i],specimen)){return i;}}return-1;}Array.prototype.indexOf=arrayIndexOf;function
arrayLastIndexOf(specimen,i){var len=ToUInt32(this.length);if(isNaN(i)){i=len-1;}else{i=ToInt32(i);if(i<0){i+=len;if(i<0){return-1;}}else
if(i>=len){i=len-1;}}for(;i>=0;--i){if(i in this&&identical(this[i],specimen)){return i;}}return-1;}Array.prototype.lastIndexOf=arrayLastIndexOf;var
endsWith_canDelete___=/_canDelete___$/;var endsWith_canRead___=/_canRead___$/;var
endsWith_canSet___=/_canSet___$/;var endsWith___=/___$/;var endsWith__=/__$/;function
typeOf(obj){var result=typeof obj;if(result!=='function'){return result;}var ctor=obj.constructor;if(typeof
ctor==='function'&&ctor.typeTag___==='RegExp'&&obj instanceof ctor){return'object';}return'function';}var
myOriginalHOP=Object.prototype.hasOwnProperty;function hasOwnProp(obj,name){var t=typeof
obj;if(t!=='object'&&t!=='function'){return false;}return myOriginalHOP.call(obj,name);}function
identical(x,y){if(x===y){return x!==0||1/x===1/y;}else{return isNaN(x)&&isNaN(y);}}function
callFault(var_args){return asFunc(this).apply(USELESS,arguments);}Object.prototype.CALL___=callFault;function
defaultLogger(str,opt_stop){}var myLogFunc=frozenFunc(defaultLogger);function getLogFunc(){return myLogFunc;}function
setLogFunc(newLogFunc){myLogFunc=newLogFunc;}function log(str){myLogFunc(String(str));}function
fail(var_args){if(typeof console!=='undefined'&&typeOf(console.trace)==='function'){console.trace();}var
message=Array.slice(arguments,0).join('');myLogFunc(message,true);throw new Error(message);}function
enforce(test,var_args){return test||fail.apply({},Array.slice(arguments,1));}function
enforceType(specimen,typename,opt_name){if(typeOf(specimen)!==typename){fail('expected ',typename,' instead of ',typeOf(specimen),': ',opt_name||specimen);}return specimen;}function
enforceNat(specimen){enforceType(specimen,'number');if(Math.floor(specimen)!==specimen){fail('Must be integral: ',specimen);}if(specimen<0){fail('Must not be negative: ',specimen);}if(Math.floor(specimen-1)!==specimen-1){fail('Beyond precision limit: ',specimen);}if(Math.floor(specimen-1)>=specimen){fail('Must not be infinite: ',specimen);}return specimen;}function
debugReference(obj){switch(typeOf(obj)){case'object':{if(obj===null){return'<null>';}return'['+(directConstructor(obj).name||'Object')+']';}default:{return'('+obj+':'+typeOf(obj)+')';}}}var
myKeeper={'toString':function toString(){return'<Logging Keeper>';},'handleRead':function
handleRead(obj,name){log('Not readable: ('+debugReference(obj)+').'+name);return void
0;},'handleCall':function handleCall(obj,name,args){fail('Not callable: (',debugReference(obj),').',name);},'handleSet':function
handleSet(obj,name,val){fail('Not settable: (',debugReference(obj),').',name);},'handleDelete':function
handleDelete(obj,name){fail('Not deletable: (',debugReference(obj),').',name);}};Object.prototype.handleRead___=function
handleRead___(name){var handlerName=name+'_getter___';if(this[handlerName]){return this[handlerName]();}return myKeeper.handleRead(this,name);};Object.prototype.handleCall___=function
handleCall___(name,args){var handlerName=name+'_handler___';if(this[handlerName]){return this[handlerName].call(this,args);}return myKeeper.handleCall(this,name,args);};Object.prototype.handleSet___=function
handleSet___(name,val){var handlerName=name+'_setter___';if(this[handlerName]){return this[handlerName](val);}return myKeeper.handleSet(this,name,val);};Object.prototype.handleDelete___=function
handleDelete___(name){var handlerName=name+'_deleter___';if(this[handlerName]){return this[handlerName]();}return myKeeper.handleDelete(this,name);};function
endsWith(str,suffix){enforceType(str,'string');enforceType(suffix,'string');var d=str.length-suffix.length;return d>=0&&str.lastIndexOf(suffix)===d;}function
directConstructor(obj){if(obj===null){return void 0;}if(obj===void 0){return void
0;}if(typeOf(obj)==='function'){return void 0;}obj=Object(obj);var result;if(myOriginalHOP.call(obj,'proto___')){var
proto=obj.proto___;if(proto===null){return void 0;}if(isPrototypical(proto)){result=proto.constructor;}else{result=directConstructor(proto);}}else{if(!myOriginalHOP.call(obj,'constructor')){result=obj.constructor;}else{var
oldConstr=obj.constructor;if(delete obj.constructor){result=obj.constructor;obj.constructor=oldConstr;}else
if(isPrototypical(obj)){result=Object;}else{fail('Discovery of direct constructors unsupported when the ','constructor property is not deletable: ',oldConstr);}}if(typeOf(result)!=='function'||!(obj
instanceof result)){fail('Discovery of direct constructors for foreign begotten ','objects not implemented on this platform.\n');}if(result.prototype.constructor===result){obj.proto___=result.prototype;}}return result;}function
getFuncCategory(fun){enforceType(fun,'function');if(fun.typeTag___){return fun.typeTag___;}else{return fun;}}function
isDirectInstanceOf(obj,ctor){var constr=directConstructor(obj);if(constr===void 0){return false;}return getFuncCategory(constr)===getFuncCategory(ctor);}function
isInstanceOf(obj,ctor){if(obj instanceof ctor){return true;}if(isDirectInstanceOf(obj,ctor)){return true;}return false;}function
isRecord(obj){return isDirectInstanceOf(obj,Object);}function isArray(obj){return isDirectInstanceOf(obj,Array);}function
isJSONContainer(obj){var constr=directConstructor(obj);if(constr===void 0){return false;}var
typeTag=constr.typeTag___;if(typeTag!=='Object'&&typeTag!=='Array'){return false;}return!isPrototypical(obj);}function
isFrozen(obj){if(!obj){return true;}if(obj.FROZEN___===obj){return true;}var t=typeof
obj;return t!=='object'&&t!=='function';}function primFreeze(obj){if(isFrozen(obj)){return obj;}var
badFlags=[];for(var k in obj){if(endsWith_canSet___.test(k)||endsWith_canDelete___.test(k)){if(obj[k]){badFlags.push(k);}}}for(var
i=0;i<badFlags.length;i++){var flag=badFlags[i];if(myOriginalHOP.call(obj,flag)){if(!(delete
obj[flag])){fail('internal: failed delete: ',debugReference(obj),'.',flag);}}if(obj[flag]){obj[flag]=false;}}obj.FROZEN___=obj;if(typeOf(obj)==='function'){if(isFunc(obj)){grantCall(obj,'call');grantCall(obj,'apply');obj.CALL___=obj;}if(obj.prototype){primFreeze(obj.prototype);}}return obj;}function
freeze(obj){if(!isJSONContainer(obj)){if(typeOf(obj)==='function'){enforce(isFrozen(obj),'Internal: non-frozen function: '+obj);return obj;}fail('cajita.freeze(obj) applies only to JSON Containers: ',debugReference(obj));}return primFreeze(obj);}function
copy(obj){if(!isJSONContainer(obj)){fail('cajita.copy(obj) applies only to JSON Containers: ',debugReference(obj));}var
result=isArray(obj)?[]:{};forOwnKeys(obj,frozenFunc(function(k,v){result[k]=v;}));return result;}function
snapshot(obj){return primFreeze(copy(obj));}function canRead(obj,name){if(obj===void
0||obj===null){return false;}return!(!obj[name+'_canRead___']);}function canEnum(obj,name){if(obj===void
0||obj===null){return false;}return!(!obj[name+'_canEnum___']);}function canCall(obj,name){if(obj===void
0||obj===null){return false;}if(obj[name+'_canCall___']){return true;}if(obj[name+'_grantCall___']){fastpathCall(obj,name);return true;}return false;}function
canSet(obj,name){if(obj===void 0||obj===null){return false;}if(obj[name+'_canSet___']===obj){return true;}if(obj[name+'_grantSet___']===obj){fastpathSet(obj,name);return true;}return false;}function
canDelete(obj,name){if(obj===void 0||obj===null){return false;}return obj[name+'_canDelete___']===obj;}function
fastpathRead(obj,name){if(name==='toString'){fail('internal: Can\'t fastpath .toString');}obj[name+'_canRead___']=obj;}function
fastpathEnumOnly(obj,name){obj[name+'_canEnum___']=obj;}function fastpathCall(obj,name){if(name==='toString'){fail('internal: Can\'t fastpath .toString');}if(obj[name+'_canSet___']){obj[name+'_canSet___']=false;}if(obj[name+'_grantSet___']){obj[name+'_grantSet___']=false;}obj[name+'_canCall___']=obj;}function
fastpathSet(obj,name){if(name==='toString'){fail('internal: Can\'t fastpath .toString');}if(isFrozen(obj)){fail('Can\'t set .',name,' on frozen (',debugReference(obj),')');}fastpathEnumOnly(obj,name);fastpathRead(obj,name);if(obj[name+'_canCall___']){obj[name+'_canCall___']=false;}if(obj[name+'_grantCall___']){obj[name+'_grantCall___']=false;}obj[name+'_canSet___']=obj;}function
fastpathDelete(obj,name){if(name==='toString'){fail('internal: Can\'t fastpath .toString');}if(isFrozen(obj)){fail('Can\'t delete .',name,' on frozen (',debugReference(obj),')');}obj[name+'_canDelete___']=obj;}function
grantRead(obj,name){fastpathRead(obj,name);}function grantEnumOnly(obj,name){fastpathEnumOnly(obj,name);}function
grantCall(obj,name){fastpathCall(obj,name);obj[name+'_grantCall___']=obj;}function
grantSet(obj,name){fastpathSet(obj,name);obj[name+'_grantSet___']=obj;}function grantDelete(obj,name){fastpathDelete(obj,name);}function
isCtor(constr){return constr&&!(!constr.CONSTRUCTOR___);}function isFunc(fun){return fun&&!(!fun.FUNC___);}function
isXo4aFunc(func){return func&&!(!func.XO4A___);}function ctor(constr,opt_Sup,opt_name){enforceType(constr,'function',opt_name);if(isFunc(constr)){fail('Simple functions can\'t be constructors: ',constr);}if(isXo4aFunc(constr)){fail('Exophoric functions can\'t be constructors: ',constr);}constr.CONSTRUCTOR___=true;if(opt_Sup){derive(constr,opt_Sup);}if(opt_name){constr.NAME___=String(opt_name);}return constr;}function
derive(constr,sup){sup=asCtor(sup);if(isFrozen(constr)){fail('Derived constructor already frozen: ',constr);}if(!isFrozen(constr.prototype)){constr.prototype.proto___=sup.prototype;}}function
reifyIfXo4a(xfunc,opt_name){if(!isXo4aFunc(xfunc)){return asFirstClass(xfunc);}var
result={'call':frozenFunc(function callXo4a(self,var_args){if(self===null||self===void
0){self=USELESS;}return xfunc.apply(self,Array.slice(arguments,1));}),'apply':frozenFunc(function
applyXo4a(self,args){if(self===null||self===void 0){self=USELESS;}return xfunc.apply(self,args);}),'bind':frozenFunc(function
bindXo4a(self,var_args){var args=arguments;if(self===null||self===void 0){self=USELESS;args=[self].concat(Array.slice(args,1));}return frozenFunc(xfunc.bind.apply(xfunc,args));}),'length':xfunc.length,'toString':frozenFunc(function
xo4aToString(){return xfunc.toString();})};if(opt_name!==void 0){result.name=opt_name;}return primFreeze(result);}function
xo4a(func,opt_name){enforceType(func,'function',opt_name);if(isCtor(func)){fail('Internal: Constructors can\'t be exophora: ',func);}if(isFunc(func)){fail('Internal: Simple functions can\'t be exophora: ',func);}func.XO4A___=true;return primFreeze(func);}function
func(fun,opt_name){enforceType(fun,'function',opt_name);if(isCtor(fun)){fail('Constructors can\'t be simple functions: ',fun);}if(isXo4aFunc(fun)){fail('Exophoric functions can\'t be simple functions: ',fun);}fun.FUNC___=true;if(opt_name){fun.NAME___=String(opt_name);}return fun;}function
frozenFunc(fun,opt_name){return primFreeze(func(fun,opt_name));}function asCtorOnly(constr){if(isCtor(constr)||isFunc(constr)){return constr;}enforceType(constr,'function');fail('Untamed functions can\'t be called as constructors: ',constr);}function
asCtor(constr){return primFreeze(asCtorOnly(constr));}function asFunc(fun){if(fun&&fun.FUNC___){if(fun.FROZEN___===fun){return fun;}else{return primFreeze(fun);}}enforceType(fun,'function');if(isCtor(fun)){if(fun===Number||fun===String||fun===Boolean){return primFreeze(fun);}fail('Constructors can\'t be called as simple functions: ',fun);}if(isXo4aFunc(fun)){fail('Exophoric functions can\'t be called as simple functions: ',fun);}fail('Untamed functions can\'t be called as simple functions: ',fun);}function
isApplicator(funoid){if(typeof funoid!=='object'){return false;}if(funoid===null){return false;}return canCallPub(funoid,'apply');}function
toFunc(fun){if(isApplicator(fun)){return frozenFunc(function applier(var_args){return callPub(fun,'apply',[USELESS,Array.slice(arguments,0)]);});}return asFunc(fun);}function
isPrototypical(o){if(typeOf(o)!=='object'){return false;}var c=o.constructor;if(typeOf(c)!=='function'){return false;}return c.prototype===o;}function
asFirstClass(value){switch(typeOf(value)){case'function':{if(isFunc(value)||isCtor(value)){if(isFrozen(value)){return value;}fail('Internal: non-frozen function encountered: ',value);}else
if(isXo4aFunc(value)){fail('Internal: toxic exophora encountered: ',value);}else{fail('Internal: toxic function encountered: ',value);}break;}case'object':{if(value!==null&&isPrototypical(value)){fail('Internal: prototypical object encountered: ',value);}return value;}default:{return value;}}}function
canReadPub(obj,name){name=String(name);if(obj===null){return false;}if(obj===void
0){return false;}if(obj[name+'_canRead___']){return true;}if(endsWith__.test(name)){return false;}if(name==='toString'){return false;}if(!isJSONContainer(obj)){return false;}if(!myOriginalHOP.call(obj,name)){return false;}fastpathRead(obj,name);return true;}function
hasOwnPropertyOf(obj,name){if(typeof name==='number'){return hasOwnProp(obj,name);}name=String(name);if(obj&&obj[name+'_canRead___']===obj){return true;}return canReadPub(obj,name)&&myOriginalHOP.call(obj,name);}function
inPub(name,obj){if(obj===null||obj===void 0){throw new TypeError('invalid \"in\" operand: '+obj);}obj=Object(obj);if(canReadPub(obj,name)){return true;}if(canCallPub(obj,name)){return true;}var
handlerName=name+'_getter___';if(handlerName in obj){return true;}handlerName=name+'_handler___';if(handlerName
in obj){return true;}return false;}function readPub(obj,name){if(typeof name==='number'){if(typeof
obj==='string'){return obj.charAt(name);}else{return obj[name];}}name=String(name);if(canReadPub(obj,name)){return obj[name];}if(obj===null||obj===void
0){throw new TypeError('Can\'t read '+name+' on '+obj);}return obj.handleRead___(name);}function
readOwn(obj,name,pumpkin){if(typeof obj!=='object'||!obj){if(typeOf(obj)!=='object'){return pumpkin;}}if(typeof
name==='number'){if(myOriginalHOP.call(obj,name)){return obj[name];}return pumpkin;}name=String(name);if(obj[name+'_canRead___']===obj){return obj[name];}if(!myOriginalHOP.call(obj,name)){return pumpkin;}if(endsWith__.test(name)){return pumpkin;}if(name==='toString'){return pumpkin;}if(!isJSONContainer(obj)){return pumpkin;}fastpathRead(obj,name);return obj[name];}function
enforceStaticPath(result,permitsUsed){forOwnKeys(permitsUsed,frozenFunc(function(name,subPermits){enforce(isFrozen(result),'Assumed frozen: ',result);if(name==='()'){}else{enforce(canReadPub(result,name),'Assumed readable: ',result,'.',name);if(inPub('()',subPermits)){enforce(canCallPub(result,name),'Assumed callable: ',result,'.',name,'()');}enforceStaticPath(readPub(result,name),subPermits);}}));}function
readImport(module_imports,name,opt_permitsUsed){var result;if(typeof name==='number'){result=module_imports[name];}else{result=readPub(module_imports,name);}if(opt_permitsUsed){enforceStaticPath(result,opt_permitsUsed);}return result;}function
canInnocentEnum(obj,name){name=String(name);if(endsWith___.test(name)){return false;}return true;}function
canEnumPub(obj,name){if(obj===null){return false;}if(obj===void 0){return false;}name=String(name);if(obj[name+'_canEnum___']){return true;}if(endsWith__.test(name)){return false;}if(!isJSONContainer(obj)){return false;}if(!myOriginalHOP.call(obj,name)){return false;}fastpathEnumOnly(obj,name);if(name==='toString'){return true;}fastpathRead(obj,name);return true;}function
canEnumOwn(obj,name){name=String(name);if(obj&&obj[name+'_canEnum___']===obj){return true;}return canEnumPub(obj,name)&&myOriginalHOP.call(obj,name);}function
Token(name){name=String(name);return primFreeze({'toString':frozenFunc(function tokenToString(){return name;})});}frozenFunc(Token);var
BREAK=Token('BREAK');var NO_RESULT=Token('NO_RESULT');function forOwnKeys(obj,fn){fn=toFunc(fn);var
keys=ownKeys(obj);for(var i=0;i<keys.length;i++){if(fn(keys[i],readPub(obj,keys[i]))===BREAK){return;}}}function
forAllKeys(obj,fn){fn=toFunc(fn);var keys=allKeys(obj);for(var i=0;i<keys.length;i++){if(fn(keys[i],readPub(obj,keys[i]))===BREAK){return;}}}function
ownKeys(obj){var result=[];if(isArray(obj)){var len=obj.length;for(var i=0;i<len;i++){result.push(i);}}else{for(var
k in obj){if(canEnumOwn(obj,k)){result.push(k);}}if(obj!==void 0&&obj!==null&&obj.handleEnum___){result=result.concat(obj.handleEnum___(true));}}return result;}function
allKeys(obj){if(isArray(obj)){return ownKeys(obj);}else{var result=[];for(var k in
obj){if(canEnumPub(obj,k)){result.push(k);}}if(obj!==void 0&&obj!==null&&obj.handleEnum___){result=result.concat(obj.handleEnum___(false));}return result;}}function
canCallPub(obj,name){if(obj===null){return false;}if(obj===void 0){return false;}name=String(name);if(obj[name+'_canCall___']){return true;}if(obj[name+'_grantCall___']){fastpathCall(obj,name);return true;}if(!canReadPub(obj,name)){return false;}if(endsWith__.test(name)){return false;}if(name==='toString'){return false;}var
func=obj[name];if(!isFunc(func)&&!isXo4aFunc(func)){return false;}fastpathCall(obj,name);return true;}function
callPub(obj,name,args){name=String(name);if(obj===null||obj===void 0){throw new TypeError('Can\'t call '+name+' on '+obj);}if(obj[name+'_canCall___']||canCallPub(obj,name)){return obj[name].apply(obj,args);}if(obj.handleCall___){return obj.handleCall___(name,args);}fail('not callable:',debugReference(obj),'.',name);}function
canSetPub(obj,name){name=String(name);if(canSet(obj,name)){return true;}if(endsWith__.test(name)){return false;}if(name==='valueOf'){return false;}if(name==='toString'){return false;}return!isFrozen(obj)&&isJSONContainer(obj);}function
setPub(obj,name,val){if(typeof name==='number'&&obj instanceof Array&&obj.FROZEN___!==obj){return obj[name]=val;}name=String(name);if(obj===null||obj===void
0){throw new TypeError('Can\'t set '+name+' on '+obj);}if(obj[name+'_canSet___']===obj){return obj[name]=val;}else
if(canSetPub(obj,name)){fastpathSet(obj,name);return obj[name]=val;}else{return obj.handleSet___(name,val);}}function
canSetStatic(ctor,staticMemberName){staticMemberName=''+staticMemberName;if(typeOf(ctor)!=='function'){log('Cannot set static member of non function',ctor);return false;}if(isFrozen(ctor)){log('Cannot set static member of frozen function',ctor);return false;}if(staticMemberName
in ctor){log('Cannot override static member ',staticMemberName);return false;}if(endsWith__.test(staticMemberName)||staticMemberName==='valueOf'){log('Illegal static member name ',staticMemberName);return false;}if(staticMemberName==='toString'){return false;}return true;}function
setStatic(ctor,staticMemberName,staticMemberValue){staticMemberName=''+staticMemberName;if(canSetStatic(ctor,staticMemberName)){ctor[staticMemberName]=staticMemberValue;fastpathEnumOnly(ctor,staticMemberName);fastpathRead(ctor,staticMemberName);}else{ctor.handleSet___(staticMemberName,staticMemberValue);}}function
canDeletePub(obj,name){name=String(name);if(isFrozen(obj)){return false;}if(endsWith__.test(name)){return false;}if(name==='valueOf'){return false;}if(name==='toString'){return false;}if(isJSONContainer(obj)){return true;}return false;}function
deletePub(obj,name){name=String(name);if(obj===null||obj===void 0){throw new TypeError('Can\'t delete '+name+' on '+obj);}if(canDeletePub(obj,name)){return deleteFieldEntirely(obj,name);}else{return obj.handleDelete___(name);}}function
deleteFieldEntirely(obj,name){delete obj[name+'_canRead___'];delete obj[name+'_canEnum___'];delete
obj[name+'_canCall___'];delete obj[name+'_grantCall___'];delete obj[name+'_grantSet___'];delete
obj[name+'_canSet___'];delete obj[name+'_canDelete___'];return delete obj[name]||(fail('not deleted: ',name),false);}function
args(original){return primFreeze(Array.slice(original,0));}var USELESS=Token('USELESS');function
manifest(ignored){}var callStackSealer=makeSealerUnsealerPair();function tameException(ex){try{switch(typeOf(ex)){case'object':{if(ex===null){return null;}if(isInstanceOf(ex,Error)){var
message=ex.message||ex.desc;var stack=ex.stack;var name=ex.constructor&&ex.constructor.name;message=!message?void
0:''+message;stack=!stack?void 0:callStackSealer.seal(''+stack);name=!name?void 0:''+name;return primFreeze({'message':message,'name':name,'stack':stack});}return''+ex;}case'string':;case'number':;case'boolean':;case'undefined':{return ex;}case'function':{return void
0;}default:{log('Unrecognized exception type '+typeOf(ex));return void 0;}}}catch(_){return void
0;}}function primBeget(proto){function F(){}F.prototype=proto;var result=new F();result.proto___=proto;return result;}function
useGetHandler(obj,name,getHandler){obj[name+'_getter___']=getHandler;}function useApplyHandler(obj,name,applyHandler){obj[name+'_handler___']=applyHandler;}function
useCallHandler(obj,name,callHandler){useApplyHandler(obj,name,function callApplier(args){return callHandler.apply(this,args);});}function
useSetHandler(obj,name,setHandler){obj[name+'_setter___']=setHandler;}function useDeleteHandler(obj,name,deleteHandler){obj[name+'_deleter___']=deleteHandler;}function
grantFunc(obj,name){frozenFunc(obj[name],name);grantCall(obj,name);grantRead(obj,name);}function
grantGeneric(proto,name){var func=xo4a(proto[name],name);grantCall(proto,name);var
pseudoFunc=reifyIfXo4a(func,name);useGetHandler(proto,name,function xo4aGetter(){return pseudoFunc;});}function
handleGeneric(obj,name,func){xo4a(func);useCallHandler(obj,name,func);var pseudoFunc=reifyIfXo4a(func,name);useGetHandler(obj,name,function
genericGetter(){return pseudoFunc;});}function grantTypedGeneric(proto,name){var
original=proto[name];handleGeneric(proto,name,function guardedApplier(var_args){if(!inheritsFrom(this,proto)){fail('Can\'t call .',name,' on a non ',directConstructor(proto),': ',this);}return original.apply(this,arguments);});}function
grantMutator(proto,name){var original=proto[name];handleGeneric(proto,name,function
nonMutatingApplier(var_args){if(isFrozen(this)){fail('Can\'t .',name,' a frozen object');}return original.apply(this,arguments);});}function
enforceMatchable(regexp){if(isInstanceOf(regexp,RegExp)){if(isFrozen(regexp)){fail('Can\'t match with frozen RegExp: ',regexp);}}else{enforceType(regexp,'string');}}function
all2(func2,arg1,arg2s){var len=arg2s.length;for(var i=0;i<len;i+=1){func2(arg1,arg2s[i]);}}all2(grantRead,Math,['E','LN10','LN2','LOG2E','LOG10E','PI','SQRT1_2','SQRT2']);all2(grantFunc,Math,['abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','max','min','pow','random','round','sin','sqrt','tan']);function
grantToString(proto){proto.TOSTRING___=xo4a(proto.toString,'toString');}useGetHandler(Object.prototype,'toString',function
toStringGetter(){if(hasOwnProp(this,'toString')&&typeOf(this.toString)==='function'&&!hasOwnProp(this,'TOSTRING___')){return this.toString;}return reifyIfXo4a(this.TOSTRING___,'toString');});useApplyHandler(Object.prototype,'toString',function
toStringApplier(args){return this.toString.apply(this,args);});useSetHandler(Object.prototype,'toString',function
toStringSetter(meth){if(isFrozen(this)){return myKeeper.handleSet(this,'toString',meth);}meth=asFirstClass(meth);this.TOSTRING___=meth;this.toString=function
delegatingToString(var_args){var args=Array.slice(arguments,0);if(typeOf(meth)==='function'){return meth.apply(this,args);}var
methApply=readPub(meth,'apply');if(typeOf(methApply)==='function'){return methApply.call(meth,this,args);}var
result=Object.toString.call(this);log('Not correctly printed: '+result);return result;};return meth;});useDeleteHandler(Object.prototype,'toString',function
toStringDeleter(){if(isFrozen(this)){return myKeeper.handleDelete(this,'toString');}return delete
this.toString&&delete this.TOSTRING___;});ctor(Object,void 0,'Object');grantToString(Object.prototype);all2(grantGeneric,Object.prototype,['toLocaleString','valueOf','isPrototypeOf']);grantRead(Object.prototype,'length');handleGeneric(Object.prototype,'hasOwnProperty',function
hasOwnPropertyHandler(name){return hasOwnPropertyOf(this,name);});handleGeneric(Object.prototype,'propertyIsEnumerable',function
propertyIsEnumerableHandler(name){name=String(name);return canEnumPub(this,name);});handleGeneric(Function.prototype,'apply',function
applyHandler(self,realArgs){return toFunc(this).apply(self,realArgs);});handleGeneric(Function.prototype,'call',function
callHandler(self,var_args){return toFunc(this).apply(self,Array.slice(arguments,1));});handleGeneric(Function.prototype,'bind',function
bindHandler(self,var_args){var thisFunc=this;var leftArgs=Array.slice(arguments,1);function
boundHandler(var_args){var args=leftArgs.concat(Array.slice(arguments,0));return callPub(thisFunc,'apply',[self,args]);}return frozenFunc(boundHandler);});ctor(Array,Object,'Array');grantFunc(Array,'slice');grantToString(Array.prototype);all2(grantTypedGeneric,Array.prototype,['toLocaleString']);all2(grantGeneric,Array.prototype,['concat','join','slice','indexOf','lastIndexOf']);all2(grantMutator,Array.prototype,['pop','push','reverse','shift','splice','unshift']);handleGeneric(Array.prototype,'sort',function
sortHandler(comparator){if(isFrozen(this)){fail('Can\'t sort a frozen array.');}if(comparator){return Array.prototype.sort.call(this,toFunc(comparator));}else{return Array.prototype.sort.call(this);}});ctor(String,Object,'String');grantFunc(String,'fromCharCode');grantToString(String.prototype);all2(grantTypedGeneric,String.prototype,['toLocaleString','indexOf','lastIndexOf']);all2(grantGeneric,String.prototype,['charAt','charCodeAt','concat','localeCompare','slice','substr','substring','toLowerCase','toLocaleLowerCase','toUpperCase','toLocaleUpperCase']);handleGeneric(String.prototype,'match',function
matchHandler(regexp){enforceMatchable(regexp);return this.match(regexp);});handleGeneric(String.prototype,'replace',function
replaceHandler(searcher,replacement){enforceMatchable(searcher);if(isFunc(replacement)){replacement=asFunc(replacement);}else
if(isApplicator(replacement)){replacement=toFunc(replacement);}else{replacement=''+replacement;}return this.replace(searcher,replacement);});handleGeneric(String.prototype,'search',function
searchHandler(regexp){enforceMatchable(regexp);return this.search(regexp);});handleGeneric(String.prototype,'split',function
splitHandler(separator,limit){enforceMatchable(separator);return this.split(separator,limit);});ctor(Boolean,Object,'Boolean');grantToString(Boolean.prototype);ctor(Number,Object,'Number');all2(grantRead,Number,['MAX_VALUE','MIN_VALUE','NaN','NEGATIVE_INFINITY','POSITIVE_INFINITY']);grantToString(Number.prototype);all2(grantTypedGeneric,Number.prototype,['toFixed','toExponential','toPrecision']);ctor(Date,Object,'Date');grantFunc(Date,'parse');grantFunc(Date,'UTC');grantToString(Date.prototype);all2(grantTypedGeneric,Date.prototype,['toDateString','toTimeString','toUTCString','toLocaleString','toLocaleDateString','toLocaleTimeString','toISOString','getDay','getUTCDay','getTimezoneOffset','getTime','getFullYear','getUTCFullYear','getMonth','getUTCMonth','getDate','getUTCDate','getHours','getUTCHours','getMinutes','getUTCMinutes','getSeconds','getUTCSeconds','getMilliseconds','getUTCMilliseconds']);all2(grantMutator,Date.prototype,['setTime','setFullYear','setUTCFullYear','setMonth','setUTCMonth','setDate','setUTCDate','setHours','setUTCHours','setMinutes','setUTCMinutes','setSeconds','setUTCSeconds','setMilliseconds','setUTCMilliseconds']);ctor(RegExp,Object,'RegExp');grantToString(RegExp.prototype);handleGeneric(RegExp.prototype,'exec',function
execHandler(specimen){if(isFrozen(this)){fail('Can\'t .exec a frozen RegExp');}specimen=String(specimen);return this.exec(specimen);});handleGeneric(RegExp.prototype,'test',function
testHandler(specimen){if(isFrozen(this)){fail('Can\'t .test a frozen RegExp');}specimen=String(specimen);return this.test(specimen);});all2(grantRead,RegExp.prototype,['source','global','ignoreCase','multiline','lastIndex']);ctor(Error,Object,'Error');grantToString(Error.prototype);grantRead(Error.prototype,'name');grantRead(Error.prototype,'message');ctor(EvalError,Error,'EvalError');ctor(RangeError,Error,'RangeError');ctor(ReferenceError,Error,'ReferenceError');ctor(SyntaxError,Error,'SyntaxError');ctor(TypeError,Error,'TypeError');ctor(URIError,Error,'URIError');var
sharedImports;var myNewModuleHandler;function getNewModuleHandler(){return myNewModuleHandler;}function
setNewModuleHandler(newModuleHandler){myNewModuleHandler=newModuleHandler;}var obtainNewModule=freeze({'handle':frozenFunc(function
handleOnly(newModule){return newModule;})});function makeNormalNewModuleHandler(){var
imports=copy(sharedImports);var lastOutcome=void 0;return freeze({'getImports':frozenFunc(function
getImports(){return imports;}),'setImports':frozenFunc(function setImports(newImports){imports=newImports;}),'getLastOutcome':frozenFunc(function
getLastOutcome(){return lastOutcome;}),'getLastValue':frozenFunc(function getLastValue(){if(lastOutcome&&lastOutcome[0]){return lastOutcome[1];}else{return void
0;}}),'handle':frozenFunc(function handle(newModule){lastOutcome=void 0;try{var result=newModule(___,imports);if(result!==NO_RESULT){lastOutcome=[true,result];}}catch(ex){lastOutcome=[false,ex];}if(lastOutcome){if(lastOutcome[0]){return lastOutcome[1];}else{throw lastOutcome[1];}}else{return void
0;}}),'handleUncaughtException':function handleUncaughtException(exception,onerror,source,lineNum){lastOutcome=[false,exception];tameException(exception);var
message='unknown';if('object'===typeOf(exception)&&exception!==null){message=String(exception.message||exception.desc||message);}if(isApplicator(onerror)){onerror=toFunc(onerror);}var
shouldReport=isFunc(onerror)?onerror.CALL___(message,String(source),String(lineNum)):onerror!==null;if(shouldReport!==false){cajita.log(source+':'+lineNum+': '+message);}}});}function
loadModule(module){return callPub(myNewModuleHandler,'handle',[frozenFunc(module)]);}var
registeredImports=[];function getId(imports){enforceType(imports,'object','imports');var
id;if('id___'in imports){id=enforceType(imports.id___,'number','id');}else{id=imports.id___=registeredImports.length;}registeredImports[id]=imports;return id;}function
getImports(id){var result=registeredImports[enforceType(id,'number','id')];if(result===void
0){fail('imports#',id,' unregistered');}return result;}function unregister(imports){enforceType(imports,'object','imports');if('id___'in
imports){var id=enforceType(imports.id___,'number','id');registeredImports[id]=void
0;}}function hasTrademark(trademark,obj){if(!hasOwnProp(obj,'trademarks___')){return false;}var
list=obj.trademarks___;for(var i=0;i<list.length;++i){if(list[i]===trademark){return true;}}return false;}function
guard(trademark,obj){if(!hasTrademark(trademark,obj)){fail('This object does not have the given trademark');}}function
stamp(trademark,obj,opt_allow_constructed){if(typeOf(trademark)!=='object'){fail('The supplied trademark is not an object.');}if(isFrozen(obj)){fail('The supplied object '+obj+' is frozen.');}if(!isJSONContainer(obj)&&typeOf(obj)!=='function'&&!obj.underConstruction___&&!opt_allow_constructed){fail('The supplied object ',obj,' has already been constructed and may not be stamped.');}var
list=obj.underConstruction___?'delayedTrademarks___':'trademarks___';if(!obj[list]){obj[list]=[];}obj[list].push(trademark);return obj;}function
initializeMap(list){var result={};for(var i=0;i<list.length;i+=2){setPub(result,list[i],asFirstClass(list[i+1]));}return result;}function
makeSealerUnsealerPair(){var flag=false;var squirrel=null;function seal(payload){function
box(){flag=true,squirrel=payload;}box.toString=frozenFunc(function toString(){return'(box)';});return frozenFunc(box);}function
unseal(box){flag=false;squirrel=null;try{box.CALL___();if(!flag){throw new Error('Sealer/Unsealer mismatch');}return squirrel;}finally{flag=false;squirrel=null;}}return freeze({'seal':frozenFunc(seal),'unseal':frozenFunc(unseal)});}function
construct(ctor,args){ctor=asCtor(ctor);switch(args.length){case 0:return new ctor();case
1:return new ctor(args[0]);case 2:return new ctor(args[0],args[1]);case 3:return new
ctor(args[0],args[1],args[2]);case 4:return new ctor(args[0],args[1],args[2],args[3]);case
5:return new ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case
7:return new ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);case 8:return new
ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);case 9:return new
ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8]);case
10:return new ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9]);case
11:return new ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10]);case
12:return new ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9],args[10],args[11]);default:{if(ctor.typeTag___==='Array'){return ctor.apply(USELESS,args);}var
tmp=function tmp(args){return ctor.apply(this,args);};tmp.prototype=ctor.prototype;return new
tmp(args);}}}var magicCount=0;var MAGIC_NUM=Math.random();var MAGIC_TOKEN=Token('MAGIC_TOKEN_FOR:'+MAGIC_NUM);var
MAGIC_NAME='_index;'+MAGIC_NUM+';';function newTable(opt_useKeyLifetime){magicCount++;var
myMagicIndexName=MAGIC_NAME+magicCount+'___';function setOnKey(key,value){if(key!==Object(key)){fail('Can\'t use key lifetime on primitive keys: ',key);}var
list=key[myMagicIndexName];if(!list){key[myMagicIndexName]=[MAGIC_TOKEN,value];}else{var
i=0;for(;i<list.length;i+=2){if(list[i]===MAGIC_TOKEN){break;}}list[i]=MAGIC_TOKEN;list[i+1]=value;}}function
getOnKey(key){if(key!==Object(key)){fail('Can\'t use key lifetime on primitive keys: ',key);}var
list=key[myMagicIndexName];if(!list){return void 0;}else{var i=0;for(;i<list.length;i+=2){if(list[i]===MAGIC_TOKEN){return list[i+1];}}return void
0;}}if(opt_useKeyLifetime){return primFreeze({'set':frozenFunc(setOnKey),'get':frozenFunc(getOnKey)});}var
myValues=[];function setOnTable(key,value){switch(typeof key){case'object':;case'function':{if(null===key){myValues.prim_null=value;return;}var
index=getOnKey(key);if(index===void 0){index=myValues.length;setOnKey(key,index);}myValues[index]=value;return;}case'string':{myValues['str_'+key]=value;return;}default:{myValues['prim_'+key]=value;return;}}}function
getOnTable(key){switch(typeof key){case'object':;case'function':{if(null===key){return myValues.prim_null;}var
index=getOnKey(key);if(void 0===index){return void 0;}return myValues[index];}case'string':{return myValues['str_'+key];}default:{return myValues['prim_'+key];}}}return primFreeze({'set':frozenFunc(setOnTable),'get':frozenFunc(getOnTable)});}function
inheritsFrom(obj,allegedParent){if(null===obj){return false;}if(void 0===obj){return false;}if(typeOf(obj)==='function'){return false;}if(typeOf(allegedParent)!=='object'){return false;}if(null===allegedParent){return false;}function
F(){}F.prototype=allegedParent;return Object(obj)instanceof F;}function getSuperCtor(func){enforceType(func,'function');if(isCtor(func)||isFunc(func)){var
result=directConstructor(func.prototype);if(isCtor(result)||isFunc(result)){return result;}}return void
0;}var attribute=new RegExp('^([\\s\\S]*)_(?:canRead|canCall|getter|handler)___$');function
getOwnPropertyNames(obj){var result=[];var seen={};var implicit=isJSONContainer(obj);for(var
k in obj){if(hasOwnProp(obj,k)){if(implicit&&!endsWith__.test(k)){if(!myOriginalHOP.call(seen,k)){seen[k]=true;result.push(k);}}else{var
match=attribute.exec(k);if(match!==null){var base=match[1];if(!myOriginalHOP.call(seen,base)){seen[base]=true;result.push(base);}}}}}return result;}function
getProtoPropertyNames(func){enforceType(func,'function');return getOwnPropertyNames(func.prototype);}function
getProtoPropertyValue(func,name){return asFirstClass(readPub(func.prototype,name));}function
beget(parent){if(!isRecord(parent)){fail('Can only beget() records: ',parent);}return primBeget(parent);}cajita={'log':log,'fail':fail,'enforce':enforce,'enforceType':enforceType,'enforceNat':enforceNat,'directConstructor':directConstructor,'getFuncCategory':getFuncCategory,'isDirectInstanceOf':isDirectInstanceOf,'isInstanceOf':isInstanceOf,'isRecord':isRecord,'isArray':isArray,'isJSONContainer':isJSONContainer,'freeze':freeze,'copy':copy,'snapshot':snapshot,'canReadPub':canReadPub,'readPub':readPub,'hasOwnPropertyOf':hasOwnPropertyOf,'readOwn':readOwn,'canEnumPub':canEnumPub,'canEnumOwn':canEnumOwn,'canInnocentEnum':canInnocentEnum,'BREAK':BREAK,'allKeys':allKeys,'forAllKeys':forAllKeys,'ownKeys':ownKeys,'forOwnKeys':forOwnKeys,'canCallPub':canCallPub,'callPub':callPub,'canSetPub':canSetPub,'setPub':setPub,'canDeletePub':canDeletePub,'deletePub':deletePub,'hasTrademark':hasTrademark,'guard':guard,'makeSealerUnsealerPair':makeSealerUnsealerPair,'USELESS':USELESS,'manifest':manifest,'construct':construct,'newTable':newTable,'inheritsFrom':inheritsFrom,'getSuperCtor':getSuperCtor,'getOwnPropertyNames':getOwnPropertyNames,'getProtoPropertyNames':getProtoPropertyNames,'getProtoPropertyValue':getProtoPropertyValue,'beget':beget};forOwnKeys(cajita,frozenFunc(function(k,v){switch(typeOf(v)){case'object':{if(v!==null){primFreeze(v);}break;}case'function':{frozenFunc(v);break;}}}));sharedImports={'cajita':cajita,'null':null,'false':false,'true':true,'NaN':NaN,'Infinity':Infinity,'undefined':void
0,'parseInt':frozenFunc(parseInt),'parseFloat':frozenFunc(parseFloat),'isNaN':frozenFunc(isNaN),'isFinite':frozenFunc(isFinite),'decodeURI':frozenFunc(decodeURI),'decodeURIComponent':frozenFunc(decodeURIComponent),'encodeURI':frozenFunc(encodeURI),'encodeURIComponent':frozenFunc(encodeURIComponent),'Math':Math,'Object':Object,'Array':Array,'String':String,'Boolean':Boolean,'Number':Number,'Date':Date,'RegExp':RegExp,'Error':Error,'EvalError':EvalError,'RangeError':RangeError,'ReferenceError':ReferenceError,'SyntaxError':SyntaxError,'TypeError':TypeError,'URIError':URIError};forOwnKeys(sharedImports,frozenFunc(function(k,v){switch(typeOf(v)){case'object':{if(v!==null){primFreeze(v);}break;}case'function':{primFreeze(v);break;}}}));primFreeze(sharedImports);___={'getLogFunc':getLogFunc,'setLogFunc':setLogFunc,'isFrozen':isFrozen,'primFreeze':primFreeze,'canRead':canRead,'grantRead':grantRead,'canEnum':canEnum,'grantEnumOnly':grantEnumOnly,'canCall':canCall,'grantCall':grantCall,'canSet':canSet,'grantSet':grantSet,'canDelete':canDelete,'grantDelete':grantDelete,'readImport':readImport,'isCtor':isCtor,'isFunc':isFunc,'isXo4aFunc':isXo4aFunc,'ctor':ctor,'func':func,'frozenFunc':frozenFunc,'asFunc':asFunc,'toFunc':toFunc,'xo4a':xo4a,'initializeMap':initializeMap,'inPub':inPub,'canSetStatic':canSetStatic,'setStatic':setStatic,'typeOf':typeOf,'hasOwnProp':hasOwnProp,'identical':identical,'args':args,'tameException':tameException,'primBeget':primBeget,'callStackUnsealer':callStackSealer.unseal,'RegExp':RegExp,'stamp':stamp,'asFirstClass':asFirstClass,'useGetHandler':useGetHandler,'useApplyHandler':useApplyHandler,'useCallHandler':useCallHandler,'useSetHandler':useSetHandler,'useDeleteHandler':useDeleteHandler,'grantFunc':grantFunc,'grantGeneric':grantGeneric,'handleGeneric':handleGeneric,'grantTypedGeneric':grantTypedGeneric,'grantMutator':grantMutator,'enforceMatchable':enforceMatchable,'all2':all2,'sharedImports':sharedImports,'getNewModuleHandler':getNewModuleHandler,'setNewModuleHandler':setNewModuleHandler,'obtainNewModule':obtainNewModule,'makeNormalNewModuleHandler':makeNormalNewModuleHandler,'loadModule':loadModule,'NO_RESULT':NO_RESULT,'getId':getId,'getImports':getImports,'unregister':unregister};forOwnKeys(cajita,frozenFunc(function(k,v){if(k
in ___){fail('internal: initialization conflict: ',k);}if(typeOf(v)==='function'){grantFunc(cajita,k);}___[k]=v;}));setNewModuleHandler(makeNormalNewModuleHandler());})(this);}{(function(global){var
console;if(global.___&&(console=global.console)&&typeof console.log==='function'){function
logToConsole(str,opt_stop){if(opt_stop&&typeof console.error==='function'){console.error(str);}else
if(typeof console.info==='function'){console.info(str);}else{console.log(str);}if(opt_stop){debugger;return;}};___.setLogFunc(logToConsole);}})(this);}{(function(){var
orig=cajita.copy(___);function mixin(obj,members){for(var i=0,n=members.length;i<n;i+=2){var
k=members[i],v=members[i+1];if(k in obj){throw new Error('overriding '+k+' in '+v);}obj[k]=v;}}function
override_members(obj,members,extraOptionalParams){for(var i=0,n=members.length;i<n;i+=2){var
k=members[i],v=members[i+1];if(!(k in obj)){throw new Error('can\'t override '+k+' in '+v);}if(extraOptionalParams!==null&&obj[k].length+extraOptionalParams!==v.length){throw new
Error('overriding '+k+' with a different signature');}obj[k]=v;}}function noop(obj,name){}function
requireNotFrozen(obj,name){if(orig.isFrozen(obj)){cajita.fail('Can\'t set .',name,' on frozen (',obj,')');}}var
stack;var stackInvalid;function startCallerStack(opt_precedingCallStack){stack=[];stackInvalid=false;}var
stackSealer=cajita.makeSealerUnsealerPair();var unsealCallerStack=stackSealer.unseal;stackSealer=stackSealer.seal;function
getCallerStack(){return stackInvalid?void 0:stackSealer(cajita.freeze(stack.slice(0)));}function
pushFrame(stackFrame){stack.push(stackFrame);return stackFrame;}function popFrame(stackFrame){var
top=stack.length-1;if(stackFrame===stack[top]){stack.length=top;}else{stackInvalid=true;}}function
rethrowWith(ex,stackFrame){pushFrame(stackFrame);attachCajaStack(ex);popFrame(stackFrame);throw ex;}function
requireObject(obj,callerIdx){switch(typeof obj){case'object':{if(obj!==null){return obj;}break;}case'function':return obj;}rethrowWith(new
Error('Expected object not '+obj),this.debugSymbols_[callerIdx]);}function attachCajaStack(error){if(error
instanceof Error&&!error.cajitaStack___){error.cajitaStack___=getCallerStack();}}function
errorDecorator(fn){var arity=fn.length;return function(var_args){try{return fn.apply(this,arguments);}catch(ex){rethrowWith(ex,this.debugSymbols_[arguments[arity]]);}};}function
callPub(obj,name,args,callerIdx){var stackFrame=pushFrame(this.debugSymbols_[callerIdx]);try{try{return orig.callPub.apply(this,arguments);}catch(ex){attachCajaStack(ex);throw ex;}}finally{popFrame(stackFrame);}}function
asFunc(fun,callerIdx){return makeWrapper(fun,'asFunc',this.debugSymbols_[callerIdx]);}function
construct(fun,args,callerIdx){var stackFrame=pushFrame(this.debugSymbols_[callerIdx]);try{try{return orig.construct(fun.callFn||fun,args);}catch(ex){attachCajaStack(ex);throw ex;}}finally{popFrame(stackFrame);}}function
makeWrapper(fun,conditionName,stackFrame){try{fun=orig[conditionName](fun);if(!fun){return fun;}}catch(ex){rethrowWith(ex,stackFrame);}function
wrapper(){pushFrame(stackFrame);try{try{return fun.apply(this,arguments);}catch(ex){attachCajaStack(ex);throw ex;}}finally{popFrame(stackFrame);}}if(fun.FUNC___){wrapper.FUNC___=true;}else
if(fun.XO4A___){wrapper.XO4A___=true;}return orig.primFreeze(wrapper);}function tameException(ex){var
ex=orig.tameException(ex);if(ex&&typeof ex==='object'&&!ex.cajitaStack___){ex.cajitaStack___=getCallerStack();}return ex;}var
origLog=cajita.log;function log(msg){if(!stackInvalid&&stack.length>0){msg=stack[stack.length-1]+': '+msg;}return origLog(msg);}function
loadModule(module){cajita.log('starting loadModule');try{orig.loadModule(module);cajita.log('done loadModule');}catch(ex){if('undefined'!==typeof
console){if(ex&&ex.cajitaStack___){var stack=unsealCallerStack(ex.cajitaStack___);if(stack){console.group(ex.message+' @ '+ex.fileName+':'+ex.lineNumber);console.error(stack.join('\n'));console.groupEnd();}}else
if('string'===typeof ex.stack){console.log(ex.stack.match(/@\S*:\d+(?:\n|$)/g).join('\n\n'));}else{console.log(''+ex);}}throw ex;}}function
userException(ex,callerIdx){var stackFrame=pushFrame(this.debugSymbols_[callerIdx]);try{attachCajaStack(ex);}finally{popFrame(stackFrame);}return ex;}function
useDebugSymbols(var_args){var newDebugSymbols=arguments;cajita.log('using debug symbols');if(!cajita.isJSONContainer(this)){cajita.fail('called on bad ___');}if(this.debugSymbols_!==void
0){cajita.fail('___ reused with different debug symbols');}var debugSymbols=[];if(newDebugSymbols.length){var
last=newDebugSymbols[0];debugSymbols.push(last);for(var i=1,n=newDebugSymbols.length;i<n;i+=2){last=last.substring(0,newDebugSymbols[i])+newDebugSymbols[i+1];debugSymbols.push(last);}}this.debugSymbols_=debugSymbols;override_members(this,['grantRead',noop,'grantEnumOnly',noop,'grantCall',noop,'grantSet',requireNotFrozen,'grantDelete',requireNotFrozen],0);override_members(this,['asFunc',asFunc,'callPub',callPub,'construct',construct],1);override_members(this,['canEnum',errorDecorator(orig.canEnum),'deletePub',errorDecorator(orig.deletePub),'inPub',errorDecorator(orig.inPub),'readPub',errorDecorator(orig.readPub),'setPub',errorDecorator(orig.setPub)],null);override_members(this,['tameException',tameException],0);}mixin(___,['getCallerStack',getCallerStack,'requireObject',requireObject,'startCallerStack',startCallerStack,'unsealCallerStack',unsealCallerStack,'useDebugSymbols',useDebugSymbols,'userException',userException]);override_members(cajita,['log',___.frozenFunc(log)],0);override_members(___,['loadModule',___.frozenFunc(loadModule)],0);startCallerStack();})();}{var
unicode={};unicode.BASE_CHAR='A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff'+'\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3'+'\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1'+'\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6'+'\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f'+'\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc'+'\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559'+'\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a'+'\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5'+'\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c'+'\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9'+'\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10'+'\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39'+'\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91'+'\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0'+'\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33'+'\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a'+'\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f'+'\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c'+'\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61'+'\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9'+'\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28'+'\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33'+'\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d'+'\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab'+'\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47'+'\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103'+'\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140'+'\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165'+'\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab'+'\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9'+'\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45'+'\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d'+'\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc'+'\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc'+'\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa'+'\u3105-\u312c\uac00-\ud7a3';unicode.IDEOGRAPHIC='\u4e00-\u9fa5\u3007\u3021-\u3029';unicode.LETTER=unicode.BASE_CHAR+unicode.IDEOGRAPHIC;unicode.COMBINING_CHAR='\u0300-\u0345\u0360-\u0361\u0483-\u0486\u0591-\u05a1\u05a3-\u05b9'+'\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4\u064b-\u0652\u0670'+'\u06d6-\u06dc\u06dd-\u06df\u06e0-\u06e4\u06e7-\u06e8\u06ea-\u06ed'+'\u0901-\u0903\u093c\u093e-\u094c\u094d\u0951-\u0954\u0962-\u0963'+'\u0981-\u0983\u09bc\u09be\u09bf\u09c0-\u09c4\u09c7-\u09c8'+'\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a02\u0a3c\u0a3e\u0a3f'+'\u0a40-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71\u0a81-\u0a83'+'\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0b01-\u0b03\u0b3c'+'\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82-\u0b83'+'\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03'+'\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83'+'\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03'+'\u0d3e-\u0d43\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0e31\u0e34-\u0e3a'+'\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd'+'\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84'+'\u0f86-\u0f8b\u0f90-\u0f95\u0f97\u0f99-\u0fad\u0fb1-\u0fb7\u0fb9'+'\u20d0-\u20dc\u20e1\u302a-\u302f\u3099\u309a',unicode.DIGIT='0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef'+'\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be7-\u0bef\u0c66-\u0c6f'+'\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29';unicode.EXTENDER='\xb7\u02d0\u02d1\u0387\u0640\u0e46\u0ec6\u3005\u3031-\u3035'+'\u309d-\u309e\u30fc-\u30fe';}{var
css={'properties':(function(){var c=[/^\s*inherit\s+$/i,/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|transparent|inherit)\s+$/i,/^\s*(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit)\s+$/i,/^\s*(?:thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i,/^\s*(?:none|inherit)\s+$/i,/^\s*(?:url\("[^\(\)\\\"\r\n]+"\)|none|inherit)\s+$/i,/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|auto|inherit)\s+$/i,/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|none|inherit)\s+$/i,/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+$/i,/^\s*(?:auto|always|avoid|left|right|inherit)\s+$/i,/^\s*(?:0|[+-]?\d+(?:\.\d+)?m?s|0|(?:\d+(?:\.\d+)?)%|inherit)\s+$/i,/^\s*(?:0|[+-]?\d+(?:\.\d+)?|inherit)\s+$/i,/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i];return{'azimuth':/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:deg|g?rad)|leftwards|rightwards|inherit)\s+$/i,'background':c[0],'backgroundAttachment':/^\s*(?:scroll|fixed|inherit)\s+$/i,'backgroundColor':c[1],'backgroundImage':c[5],'backgroundPosition':/^\s*(?:(?:0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|left|center|right)\s+(?:(?:0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|top|center|bottom)\s+)?|inherit\s+)$/i,'backgroundRepeat':/^\s*(?:repeat|repeat-x|repeat-y|no-repeat|inherit)\s+$/i,'border':c[0],'borderBottom':c[0],'borderBottomColor':c[1],'borderBottomStyle':c[2],'borderBottomWidth':c[3],'borderCollapse':/^\s*(?:collapse|separate|inherit)\s+$/i,'borderColor':/^\s*(?:(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|transparent)\s+){1,4}|inherit\s+)$/i,'borderLeft':c[0],'borderLeftColor':c[1],'borderLeftStyle':c[2],'borderLeftWidth':c[3],'borderRadius':/^\s*0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+)?$/i,'borderRight':c[0],'borderRightColor':c[1],'borderRightStyle':c[2],'borderRightWidth':c[3],'borderSpacing':/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+)?|inherit\s+)$/i,'borderStyle':/^\s*(?:(?:(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s+){1,4}|inherit\s+)$/i,'borderTop':c[0],'borderTopColor':c[1],'borderTopStyle':c[2],'borderTopWidth':c[3],'borderWidth':/^\s*(?:(?:(?:thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc))\s+){1,4}|inherit\s+)$/i,'bottom':c[6],'captionSide':/^\s*(?:top|bottom|inherit)\s+$/i,'clear':/^\s*(?:none|left|right|both|inherit)\s+$/i,'clip':/^\s*(?:auto|inherit)\s+$/i,'color':/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|inherit)\s+$/i,'counterIncrement':c[4],'counterReset':c[4],'cssFloat':/^\s*(?:left|right|none|inherit)\s+$/i,'cue':c[0],'cueAfter':c[5],'cueBefore':c[5],'cursor':/^\s*(?:(?:url\("[^\(\)\\\"\r\n]+"\)\s+,\s+)*(?:auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)|inherit)\s+$/i,'direction':/^\s*(?:ltr|rtl|inherit)\s+$/i,'display':/^\s*(?:inline|block|list-item|run-in|inline-block|table|inline-table|table-row-group|table-header-group|table-footer-group|table-row|table-column-group|table-column|table-cell|table-caption|none|inherit)\s+$/i,'elevation':/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:deg|g?rad)|below|level|above|higher|lower|inherit)\s+$/i,'emptyCells':/^\s*(?:show|hide|inherit)\s+$/i,'font':/^\s*(?:caption|icon|menu|message-box|small-caption|status-bar|inherit)\s+$/i,'fontFamily':/^\s*(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+(?:,\s+(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+)*|inherit\s+)$/i,'fontSize':/^\s*(?:xx-small|x-small|small|medium|large|x-large|xx-large|(?:small|larg)er|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+$/i,'fontStyle':/^\s*(?:normal|italic|oblique|inherit)\s+$/i,'fontVariant':/^\s*(?:normal|small-caps|inherit)\s+$/i,'fontWeight':/^\s*(?:normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)\s+$/i,'height':c[6],'left':c[6],'letterSpacing':c[12],'lineHeight':/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+$/i,'listStyle':c[0],'listStyleImage':c[5],'listStylePosition':/^\s*(?:inside|outside|inherit)\s+$/i,'listStyleType':/^\s*(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit)\s+$/i,'margin':/^\s*(?:(?:(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|auto)\s+){1,4}|inherit\s+)$/i,'marginBottom':c[6],'marginLeft':c[6],'marginRight':c[6],'marginTop':c[6],'maxHeight':c[7],'maxWidth':c[7],'minHeight':c[8],'minWidth':c[8],'opacity':c[0],'outline':c[0],'outlineColor':/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|purple|red|silver|teal|white|yellow|invert|inherit)\s+$/i,'outlineStyle':c[2],'outlineWidth':c[3],'overflow':/^\s*(?:visible|hidden|scroll|auto|inherit)\s+$/i,'padding':/^\s*(?:(?:(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%)\s+){1,4}|inherit\s+)$/i,'paddingBottom':c[8],'paddingLeft':c[8],'paddingRight':c[8],'paddingTop':c[8],'pageBreakAfter':c[9],'pageBreakBefore':c[9],'pageBreakInside':/^\s*(?:avoid|auto|inherit)\s+$/i,'pause':/^\s*(?:(?:(?:0|[+-]?\d+(?:\.\d+)?m?s|0|(?:\d+(?:\.\d+)?)%)\s+){1,2}|inherit\s+)$/i,'pauseAfter':c[10],'pauseBefore':c[10],'pitch':/^\s*(?:0|(?:\d+(?:\.\d+)?)k?Hz|x-low|low|medium|high|x-high|inherit)\s+$/i,'pitchRange':c[11],'playDuring':/^\s*(?:auto|none|inherit)\s+$/i,'position':/^\s*(?:static|relative|absolute|fixed|inherit)\s+$/i,'quotes':c[4],'richness':c[11],'right':c[6],'speak':/^\s*(?:normal|none|spell-out|inherit)\s+$/i,'speakHeader':/^\s*(?:once|always|inherit)\s+$/i,'speakNumeral':/^\s*(?:digits|continuous|inherit)\s+$/i,'speakPunctuation':/^\s*(?:code|none|inherit)\s+$/i,'speechRate':/^\s*(?:0|[+-]?\d+(?:\.\d+)?|x-slow|slow|medium|fast|x-fast|faster|slower|inherit)\s+$/i,'stress':c[11],'tableLayout':/^\s*(?:auto|fixed|inherit)\s+$/i,'textAlign':/^\s*(?:left|right|center|justify|inherit)\s+$/i,'textDecoration':c[4],'textIndent':/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|inherit)\s+$/i,'textTransform':/^\s*(?:capitalize|uppercase|lowercase|none|inherit)\s+$/i,'textWrap':/^\s*(?:normal|unrestricted|none|suppress)\s+$/i,'top':c[6],'unicodeBidi':/^\s*(?:normal|embed|bidi-override|inherit)\s+$/i,'verticalAlign':/^\s*(?:baseline|sub|super|top|text-top|middle|bottom|text-bottom|0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i,'visibility':/^\s*(?:visible|hidden|collapse|inherit)\s+$/i,'voiceFamily':/^\s*(?:(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)\s+,\s+)*(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)|inherit)\s+$/i,'volume':/^\s*(?:0|(?:\d+(?:\.\d+)?)|0|[+-]?\d+(?:\.\d+)?%|silent|x-soft|soft|medium|loud|x-loud|inherit)\s+$/i,'whiteSpace':/^\s*(?:normal|pre|nowrap|pre-wrap|pre-line|inherit)\s+$/i,'width':/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|auto|inherit)\s+$/i,'wordSpacing':c[12],'wordWrap':/^\s*(?:normal|break-word)\s+$/i,'zIndex':/^\s*(?:auto|\d+|inherit)\s+$/i,'zoom':/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)|0|[+-]?\d+(?:\.\d+)?%)\s+$/i};})()};}{var
html4={};html4 .atype={'NONE':0,'URI':1,'SCRIPT':2,'STYLE':3,'ID':4,'IDREF':5,'IDREFS':6,'GLOBAL_NAME':7,'LOCAL_NAME':8,'CLASSES':9,'FRAME_TARGET':10};html4
.ATTRIBS={'*:class':9,'*:dir':0,'*:id':4,'*:lang':0,'*:onclick':2,'*:ondblclick':2,'*:onkeydown':2,'*:onkeypress':2,'*:onkeyup':2,'*:onmousedown':2,'*:onmousemove':2,'*:onmouseout':2,'*:onmouseover':2,'*:onmouseup':2,'*:style':3,'*:title':0,'a:coords':0,'a:href':1,'a:hreflang':0,'a:name':7,'a:onblur':2,'a:onfocus':2,'a:rel':0,'a:rev':0,'a:shape':0,'a:tabindex':0,'a:target':10,'a:type':0,'area:alt':0,'area:coords':0,'area:href':1,'area:nohref':0,'area:onblur':2,'area:onfocus':2,'area:shape':0,'area:tabindex':0,'area:target':10,'bdo:dir':0,'blockquote:cite':1,'br:clear':0,'button:disabled':0,'button:name':8,'button:onblur':2,'button:onfocus':2,'button:tabindex':0,'button:type':0,'button:value':0,'caption:align':0,'col:align':0,'col:char':0,'col:charoff':0,'col:span':0,'col:valign':0,'col:width':0,'colgroup:align':0,'colgroup:char':0,'colgroup:charoff':0,'colgroup:span':0,'colgroup:valign':0,'colgroup:width':0,'del:cite':1,'del:datetime':0,'dir:compact':0,'div:align':0,'dl:compact':0,'font:color':0,'font:face':0,'font:size':0,'form:accept':0,'form:action':1,'form:enctype':0,'form:method':0,'form:name':7,'form:onreset':2,'form:onsubmit':2,'form:target':10,'h1:align':0,'h2:align':0,'h3:align':0,'h4:align':0,'h5:align':0,'h6:align':0,'hr:align':0,'hr:noshade':0,'hr:size':0,'hr:width':0,'img:align':0,'img:alt':0,'img:border':0,'img:height':0,'img:hspace':0,'img:ismap':0,'img:longdesc':1,'img:name':7,'img:src':1,'img:usemap':0,'img:vspace':0,'img:width':0,'input:accept':0,'input:align':0,'input:alt':0,'input:checked':0,'input:disabled':0,'input:ismap':0,'input:maxlength':0,'input:name':8,'input:onblur':2,'input:onchange':2,'input:onfocus':2,'input:onselect':2,'input:readonly':0,'input:size':0,'input:src':1,'input:tabindex':0,'input:type':0,'input:usemap':0,'input:value':0,'ins:cite':1,'ins:datetime':0,'label:for':5,'label:onblur':2,'label:onfocus':2,'legend:align':0,'li:type':0,'li:value':0,'map:name':7,'menu:compact':0,'ol:compact':0,'ol:start':0,'ol:type':0,'optgroup:disabled':0,'optgroup:label':0,'option:disabled':0,'option:label':0,'option:selected':0,'option:value':0,'p:align':0,'pre:width':0,'q:cite':1,'select:disabled':0,'select:multiple':0,'select:name':8,'select:onblur':2,'select:onchange':2,'select:onfocus':2,'select:size':0,'select:tabindex':0,'table:align':0,'table:bgcolor':0,'table:border':0,'table:cellpadding':0,'table:cellspacing':0,'table:frame':0,'table:rules':0,'table:summary':0,'table:width':0,'tbody:align':0,'tbody:char':0,'tbody:charoff':0,'tbody:valign':0,'td:abbr':0,'td:align':0,'td:axis':0,'td:bgcolor':0,'td:char':0,'td:charoff':0,'td:colspan':0,'td:headers':6,'td:height':0,'td:nowrap':0,'td:rowspan':0,'td:scope':0,'td:valign':0,'td:width':0,'textarea:cols':0,'textarea:disabled':0,'textarea:name':8,'textarea:onblur':2,'textarea:onchange':2,'textarea:onfocus':2,'textarea:onselect':2,'textarea:readonly':0,'textarea:rows':0,'textarea:tabindex':0,'tfoot:align':0,'tfoot:char':0,'tfoot:charoff':0,'tfoot:valign':0,'th:abbr':0,'th:align':0,'th:axis':0,'th:bgcolor':0,'th:char':0,'th:charoff':0,'th:colspan':0,'th:headers':6,'th:height':0,'th:nowrap':0,'th:rowspan':0,'th:scope':0,'th:valign':0,'th:width':0,'thead:align':0,'thead:char':0,'thead:charoff':0,'thead:valign':0,'tr:align':0,'tr:bgcolor':0,'tr:char':0,'tr:charoff':0,'tr:valign':0,'ul:compact':0,'ul:type':0};html4
.eflags={'OPTIONAL_ENDTAG':1,'EMPTY':2,'CDATA':4,'RCDATA':8,'UNSAFE':16,'FOLDABLE':32};html4
.ELEMENTS={'a':0,'abbr':0,'acronym':0,'address':0,'applet':16,'area':2,'b':0,'base':18,'basefont':18,'bdo':0,'big':0,'blockquote':0,'body':49,'br':2,'button':0,'caption':0,'center':0,'cite':0,'code':0,'col':2,'colgroup':1,'dd':1,'del':0,'dfn':0,'dir':0,'div':0,'dl':0,'dt':1,'em':0,'fieldset':0,'font':0,'form':0,'frame':18,'frameset':16,'h1':0,'h2':0,'h3':0,'h4':0,'h5':0,'h6':0,'head':49,'hr':2,'html':49,'i':0,'iframe':20,'img':2,'input':2,'ins':0,'isindex':18,'kbd':0,'label':0,'legend':0,'li':1,'link':18,'map':0,'menu':0,'meta':18,'noframes':20,'noscript':20,'object':16,'ol':0,'optgroup':0,'option':1,'p':1,'param':18,'pre':0,'q':0,'s':0,'samp':0,'script':20,'select':0,'small':0,'span':0,'strike':0,'strong':0,'style':20,'sub':0,'sup':0,'table':0,'tbody':1,'td':1,'textarea':8,'tfoot':1,'th':1,'thead':1,'title':24,'tr':1,'tt':0,'u':0,'ul':0,'var':0};}{var
html=(function(){var lcase;if('script'==='SCRIPT'.toLowerCase()){lcase=function(s){return s.toLowerCase();};}else{lcase=function(s){return s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)|32);});};}var
ENTITIES={'LT':'<','GT':'>','AMP':'&','NBSP':'\xa0','QUOT':'\"','APOS':'\''};var
decimalEscapeRe=/^#(\d+)$/;var hexEscapeRe=/^#x([0-9A-F]+)$/;function lookupEntity(name){name=name.toUpperCase();if(ENTITIES.hasOwnProperty(name)){return ENTITIES[name];}var
m=name.match(decimalEscapeRe);if(m){return String.fromCharCode(parseInt(m[1],10));}else
if(!(!(m=name.match(hexEscapeRe)))){return String.fromCharCode(parseInt(m[1],16));}return'';}function
decodeOneEntity(_,name){return lookupEntity(name);}var nulRe=/\0/g;function stripNULs(s){return s.replace(nulRe,'');}var
entityRe=/&(#\d+|#x[\da-f]+|\w+);/g;function unescapeEntities(s){return s.replace(entityRe,decodeOneEntity);}var
ampRe=/&/g;var looseAmpRe=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;var ltRe=/</g;var
gtRe=/>/g;var quotRe=/\"/g;var eqRe=/=/g;function escapeAttrib(s){return s.replace(ampRe,'&amp;').replace(ltRe,'&lt;').replace(gtRe,'&gt;').replace(quotRe,'&quot;').replace(eqRe,'&#61;');}function
normalizeRCData(rcdata){return rcdata.replace(looseAmpRe,'&amp;$1').replace(ltRe,'&lt;').replace(gtRe,'&gt;');}var
INSIDE_TAG_TOKEN=new RegExp('^\\s*(?:'+('(?:'+'([a-z][a-z-]*)'+('('+'\\s*=\\s*'+('('+'\"[^\"]*\"'+'|\'[^\']*\''+'|(?=[a-z][a-z-]*\\s*=)'+'|[^>\"\'\\s]*'+')')+')')+'?'+')')+'|(/?>)'+'|[^\\w\\s>]+)','i');var
OUTSIDE_TAG_TOKEN=new RegExp('^(?:'+'&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);'+'|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>'+'|<(/)?([a-z][a-z0-9]*)'+'|([^<&>]+)'+'|([<&>]))','i');function
makeSaxParser(handler){return function parse(htmlText,param){htmlText=String(htmlText);var
htmlLower=null;var inTag=false;var attribs=[];var tagName;var eflags;var openTag;handler.startDoc&&handler.startDoc(param);while(htmlText){var
m=htmlText.match(inTag?INSIDE_TAG_TOKEN:OUTSIDE_TAG_TOKEN);htmlText=htmlText.substring(m[0].length);if(inTag){if(m[1]){var
attribName=lcase(m[1]);var decodedValue;if(m[2]){var encodedValue=m[3];switch(encodedValue.charCodeAt(0)){case
34:;case 39:{encodedValue=encodedValue.substring(1,encodedValue.length-1);break;}}decodedValue=unescapeEntities(stripNULs(encodedValue));}else{decodedValue=attribName;}attribs.push(attribName,decodedValue);}else
if(m[4]){if(eflags!==void 0){if(openTag){handler.startTag&&handler.startTag(tagName,attribs,param);}else{handler.endTag&&handler.endTag(tagName,param);}}if(openTag&&eflags&(html4
.eflags.CDATA|html4 .eflags.RCDATA)){if(htmlLower===null){htmlLower=lcase(htmlText);}else{htmlLower=htmlLower.substring(htmlLower.length-htmlText.length);}var
dataEnd=htmlLower.indexOf('</'+tagName);if(dataEnd<0){dataEnd=htmlText.length;}if(eflags&html4
.eflags.CDATA){handler.cdata&&handler.cdata(htmlText.substring(0,dataEnd),param);}else
if(handler.rcdata){handler.rcdata(normalizeRCData(htmlText.substring(0,dataEnd)),param);}htmlText=htmlText.substring(dataEnd);}tagName=eflags=openTag=void
0;attribs.length=0;inTag=false;}}else{if(m[1]){handler.pcdata&&handler.pcdata(m[0],param);}else
if(m[3]){openTag=!m[2];inTag=true;tagName=m[3].toLowerCase();eflags=html4 .ELEMENTS.hasOwnProperty(tagName)?html4
.ELEMENTS[tagName]:void 0;}else if(m[4]){handler.pcdata&&handler.pcdata(m[4],param);}else
if(m[5]){if(handler.pcdata){switch(m[5]){case'<':{handler.pcdata('&lt;',param);break;}case'>':{handler.pcdata('&gt;',param);break;}default:{handler.pcdata('&amp;',param);break;}}}}}}handler.endDoc&&handler.endDoc(param);};}return{'normalizeRCData':normalizeRCData,'escapeAttrib':escapeAttrib,'unescapeEntities':unescapeEntities,'makeSaxParser':makeSaxParser};})();html.makeHtmlSanitizer=function(sanitizeAttributes){var
stack=[];var ignoring=false;return html.makeSaxParser({'startDoc':function(_){stack=[];ignoring=false;},'startTag':function(tagName,attribs,out){if(ignoring){return;}if(!html4
.ELEMENTS.hasOwnProperty(tagName)){return;}var eflags=html4 .ELEMENTS[tagName];if(eflags&html4
.eflags.FOLDABLE){return;}else if(eflags&html4 .eflags.UNSAFE){ignoring=!(eflags&html4
.eflags.EMPTY);return;}attribs=sanitizeAttributes(tagName,attribs);if(attribs){if(!(eflags&html4
.eflags.EMPTY)){stack.push(tagName);}out.push('<',tagName);for(var i=0,n=attribs.length;i<n;i+=2){var
attribName=attribs[i],value=attribs[i+1];if(value!==null&&value!==void 0){out.push(' ',attribName,'=\"',html.escapeAttrib(value),'\"');}}out.push('>');}},'endTag':function(tagName,out){if(ignoring){ignoring=false;return;}if(!html4
.ELEMENTS.hasOwnProperty(tagName)){return;}var eflags=html4 .ELEMENTS[tagName];if(!(eflags&(html4
.eflags.UNSAFE|html4 .eflags.EMPTY|html4 .eflags.FOLDABLE))){var index;if(eflags&html4
.eflags.OPTIONAL_ENDTAG){for(index=stack.length;--index>=0;){var stackEl=stack[index];if(stackEl===tagName){break;}if(!(html4
.ELEMENTS[stackEl]&html4 .eflags.OPTIONAL_ENDTAG)){return;}}}else{for(index=stack.length;--index>=0;){if(stack[index]===tagName){break;}}}if(index<0){return;}for(var
i=stack.length;--i>index;){var stackEl=stack[i];if(!(html4 .ELEMENTS[stackEl]&html4
.eflags.OPTIONAL_ENDTAG)){out.push('</',stackEl,'>');}}stack.length=index;out.push('</',tagName,'>');}},'pcdata':function(text,out){if(!ignoring){out.push(text);}},'rcdata':function(text,out){if(!ignoring){out.push(text);}},'cdata':function(text,out){if(!ignoring){out.push(text);}},'endDoc':function(out){for(var
i=stack.length;--i>=0;){out.push('</',stack[i],'>');}stack.length=0;}});};function
html_sanitize(htmlText,opt_urlPolicy,opt_nmTokenPolicy){var out=[];html.makeHtmlSanitizer(function
sanitizeAttribs(tagName,attribs){for(var i=0;i<attribs.length;i+=2){var attribName=attribs[i];var
value=attribs[i+1];var atype=null,attribKey;if((attribKey=tagName+':'+attribName,html4
.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*:'+attribName,html4 .ATTRIBS.hasOwnProperty(attribKey))){atype=html4
.ATTRIBS[attribKey];}if(atype!==null){switch(atype){case html4 .atype.SCRIPT:;case
html4 .atype.STYLE:value=null;case html4 .atype.IDREF:;case html4 .atype.IDREFS:;case
html4 .atype.GLOBAL_NAME:;case html4 .atype.LOCAL_NAME:;case html4 .atype.CLASSES:{value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;break;}case
html4 .atype.URI:{value=opt_urlPolicy&&opt_urlPolicy(value);break;}}}else{value=null;}attribs[i+1]=value;}return attribs;})(htmlText,out);return out.join('');}}{function
HtmlEmitter(base){if(!base){throw new Error();}this.cursor_=[base];}HtmlEmitter.prototype={'top_':function(){return this.cursor_[this.cursor_.length-1];},'doc_':function(){return this.cursor_[0].ownerDocument||document;},'b':function(tagName,unary){this.cursor_.push(this.doc_().createElement(tagName));return this;},'e':function(tagName){--this.cursor_.length;return this;},'f':function(unary){if(unary){var
child=this.cursor_.pop();this.top_().appendChild(child);}else{var topIdx=this.cursor_.length-1;this.cursor_[topIdx-1].appendChild(this.cursor_[topIdx]);}return this;},'a':function(name,value){var
node=this.top_();bridal.setAttribute(node,name,value);switch(name){case'value':{if('INPUT'===node.tagName||'TEXTAREA'==node.tagName){node.defaultValue=value;}break;}case'checked':{if('INPUT'===node.tagName){node.defaultChecked=!(!value);}break;}case'selected':{if('OPTION'===node.tagName){node.defaultSelected=!(!value);}break;}}return this;},'h':function(handlerName,handlerBody){var
node=this.top_();bridal.setAttribute(node,handlerName,handlerBody);node[handlerName]=new
Function('event',handlerBody);return this;},'pc':function(text){this.top_().appendChild(this.doc_().createTextNode(text));return this;},'cd':function(text){this.top_().appendChild(this.doc_().createTextNode(text));return this;},'ih':function(html){var
top=this.top_();if(top.firstChild){var container=this.doc_().createElement(top.nodeName);container.innerHTML=html;while(container.firstChild){top.appendChild(container.firstChild);}}else{top.innerHTML=html;}return this;}};}{(function(){var
imports=___.getNewModuleHandler().getImports();imports.loader={'provide':___.func(function(v){valijaMaker=v;})};imports.outers=imports;})();}{var
bridal=(function(){var features={'attachEvent':!(!document.createElement('div').attachEvent),'setAttributeExtraParam':new
RegExp('Internet Explorer').test(navigator.appName)};function addEventListener(element,type,handler,useCapture){if(features.attachEvent){element.attachEvent('on'+type,handler);}else{element.addEventListener(type,handler,useCapture);}}function
removeEventListener(element,type,handler,useCapture){if(features.attachEvent){element.detachEvent('on'+type,handler);}else{element.removeEventListener(type,handler,useCapture);}}function
cloneNode(node,deep){var clone;if(!document.all){clone=node.cloneNode(deep);}else{clone=constructClone(node,deep);}fixupClone(node,clone);return clone;}var
endsWith__=/__$/;function constructClone(node,deep){var clone;if(node.nodeType===1){var
tagDesc=node.tagName;switch(node.tagName){case'INPUT':{tagDesc='<input name=\"'+html.escapeAttrib(node.name)+'\" type=\"'+html.escapeAttrib(node.type)+'\" value=\"'+html.escapeAttrib(node.defaultValue)+'\"'+(node.defaultChecked?' checked=\"checked\">':'>');break;}case'OPTION':{tagDesc='<option '+(node.defaultSelected?' selected=\"selected\">':'>');break;}case'TEXTAREA':{tagDesc='<textarea value=\"'+html.escapeAttrib(node.defaultValue)+'\">';break;}}clone=document.createElement(tagDesc);var
attrs=node.attributes;for(var i=0,attr;attr=attrs[i];++i){if(attr.specified&&!endsWith__.test(attr.name)){clone.setAttribute(attr.nodeName,attr.nodeValue);}}}else{clone=node.cloneNode(false);}if(deep){for(var
child=node.firstChild;child;child=child.nextSibling){var cloneChild=constructClone(child,deep);clone.appendChild(cloneChild);}}return clone;}function
fixupClone(node,clone){for(var child=node.firstChild,cloneChild=clone.firstChild;cloneChild;child=child.nextSibling,cloneChild=cloneChild.nextSibling){fixupClone(child,cloneChild);}if(node.nodeType===1){switch(node.tagName){case'INPUT':{clone.value=node.value;clone.checked=node.checked;break;}case'OPTION':{clone.selected=node.selected;clone.value=node.value;break;}case'TEXTAREA':{clone.value=node.value;break;}}}var
originalAttribs=node.attributes___;if(originalAttribs){var attribs={};clone.attributes___=attribs;cajita.forOwnKeys(originalAttribs,___.func(function(k,v){switch(typeof
v){case'string':;case'number':;case'boolean':{attribs[k]=v;break;}}}));}}function
createStylesheet(document,cssText){var styleSheet=document.createElement('style');styleSheet.setAttribute('type','text/css');if(styleSheet.styleSheet){styleSheet.styleSheet.cssText=cssText;}else{styleSheet.appendChild(document.createTextNode(cssText));}return styleSheet;}function
setAttribute(node,name,value){if(name==='style'&&typeof node.style.cssText==='string'){node.style.cssText=value;}else
if(name==='class'){node.className=value;}else if(features.setAttributeExtraParam){node.setAttribute(name,value,0);}else{node.setAttribute(name,value);}return value;}return{'addEventListener':addEventListener,'removeEventListener':removeEventListener,'cloneNode':cloneNode,'createStylesheet':createStylesheet,'setAttribute':setAttribute};})();}{var
domitaModules;if(!domitaModules){domitaModules={};}domitaModules.classUtils=function(){function
exportFields(object,fields){for(var i=fields.length;--i>=0;){var field=fields[i];var
fieldUCamel=field.charAt(0).toUpperCase()+field.substring(1);var getterName='get'+fieldUCamel;var
setterName='set'+fieldUCamel;var count=0;if(object[getterName]){++count;___.useGetHandler(object,field,object[getterName]);}if(object[setterName]){++count;___.useSetHandler(object,field,object[setterName]);}if(!count){throw new
Error('Failed to export field '+field+' on '+object);}}}function extend(subClass,baseClass){var
noop=function(){};noop.prototype=baseClass.prototype;subClass.prototype=new noop();subClass.prototype.constructor=subClass;}return{'exportFields':exportFields,'extend':extend};};domitaModules.XMLHttpRequestCtor=function(XMLHttpRequest,ActiveXObject){if(XMLHttpRequest){return XMLHttpRequest;}else
if(ActiveXObject){var activeXClassId;return function ActiveXObjectForIE(){if(activeXClassId===void
0){activeXClassId=null;var activeXClassIds=['MSXML2.XMLHTTP.5.0','MSXML2.XMLHTTP.4.0','MSXML2.XMLHTTP.3.0','MSXML2.XMLHTTP','MICROSOFT.XMLHTTP.1.0','MICROSOFT.XMLHTTP.1','MICROSOFT.XMLHTTP'];for(var
i=0,n=activeXClassIds.length;i<n;i++){var candidate=activeXClassIds[i];try{void new
ActiveXObject(candidate);activeXClassId=candidate;break;}catch(e){}}activeXClassIds=null;}return new
ActiveXObject(activeXClassId);};}else{throw new Error('ActiveXObject not available');}};domitaModules.TameXMLHttpRequest=function(xmlHttpRequestMaker,uriCallback){var
classUtils=domitaModules.classUtils();function TameXMLHttpRequest(){this.xhr___=new
xmlHttpRequestMaker();classUtils.exportFields(this,['onreadystatechange','readyState','responseText','responseXML','status','statusText']);}TameXMLHttpRequest.prototype.setOnreadystatechange=function(handler){var
self=this;this.xhr___.onreadystatechange=function(event){var evt={'target':self};return ___.callPub(handler,'call',[void
0,evt]);};};TameXMLHttpRequest.prototype.getReadyState=function(){return Number(this.xhr___.readyState);};TameXMLHttpRequest.prototype.open=function(method,URL,opt_async,opt_userName,opt_password){method=String(method);var
safeUri=uriCallback.rewrite(String(URL),'*/*');if(safeUri===void 0){throw'URI violates security policy';}switch(arguments.length){case
2:{this.xhr___.open(method,safeUri);break;}case 3:{this.xhr___.open(method,safeUri,Boolean(opt_async));break;}case
4:{this.xhr___.open(method,safeUri,Boolean(opt_async),String(opt_userName));break;}case
5:{this.xhr___.open(method,safeUri,Boolean(opt_async),String(opt_userName),String(opt_password));break;}default:{throw'XMLHttpRequest cannot accept '+arguments.length+' arguments';break;}}};TameXMLHttpRequest.prototype.setRequestHeader=function(label,value){this.xhr___.setRequestHeader(String(label),String(value));};TameXMLHttpRequest.prototype.send=function(opt_data){if(arguments.length===0){this.xhr___.send('');}else
if(typeof opt_data==='string'){this.xhr___.send(opt_data);return;}else{throw'Sending XML data not yet supported';}};TameXMLHttpRequest.prototype.abort=function(){this.xhr___.abort();};TameXMLHttpRequest.prototype.getAllResponseHeaders=function(){return String(this.xhr___.getAllResponseHeaders());};TameXMLHttpRequest.prototype.getResponseHeader=function(headerName){return String(this.xhr___.getResponseHeader(String(headerName)));};TameXMLHttpRequest.prototype.getResponseText=function(){return String(this.xhr___.responseText);};TameXMLHttpRequest.prototype.getResponseXML=function(){return{};};TameXMLHttpRequest.prototype.getStatus=function(){return Number(this.xhr___.status);};TameXMLHttpRequest.prototype.getStatusText=function(){return String(this.xhr___.statusText);};TameXMLHttpRequest.prototype.toString=function(){return'Not a real XMLHttpRequest';};___.ctor(TameXMLHttpRequest,void
0,'TameXMLHttpRequest');___.all2(___.grantTypedGeneric,TameXMLHttpRequest.prototype,['open','setRequestHeader','send','abort','getAllResponseHeaders','getResponseHeader']);return TameXMLHttpRequest;};attachDocumentStub=(function(){function
arrayRemove(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;return array.push.apply(array,rest);}var
tameNodeTrademark={};var tameEventTrademark={};function Html(htmlFragment){this.html___=String(htmlFragment||'');}Html.prototype.valueOf=Html.prototype.toString=function(){return this.html___;};function
safeHtml(htmlFragment){return htmlFragment instanceof Html?htmlFragment.html___:html.escapeAttrib(String(htmlFragment||''));}function
blessHtml(htmlFragment){return htmlFragment instanceof Html?htmlFragment:new Html(htmlFragment);}var
XML_SPACE='	\n\r ';var XML_NAME_PATTERN=new RegExp('^['+unicode.LETTER+'_:]['+unicode.LETTER+unicode.DIGIT+'.\\-_:'+unicode.COMBINING_CHAR+unicode.EXTENDER+']*$');var
XML_NMTOKEN_PATTERN=new RegExp('^['+unicode.LETTER+unicode.DIGIT+'.\\-_:'+unicode.COMBINING_CHAR+unicode.EXTENDER+']+$');var
XML_NMTOKENS_PATTERN=new RegExp('^(?:['+XML_SPACE+']*['+unicode.LETTER+unicode.DIGIT+'.\\-_:'+unicode.COMBINING_CHAR+unicode.EXTENDER+']+)+['+XML_SPACE+']*$');var
JS_SPACE='	\n\r ';var JS_IDENT='(?:[a-zA-Z_][a-zA-Z0-9$_]*[a-zA-Z0-9$]|[a-zA-Z])_?';var
SIMPLE_HANDLER_PATTERN=new RegExp('^['+JS_SPACE+']*'+'(return['+JS_SPACE+']+)?'+'('+JS_IDENT+')['+JS_SPACE+']*'+'\\((?:this'+'(?:['+JS_SPACE+']*,['+JS_SPACE+']*event)?'+'['+JS_SPACE+']*)?\\)'+'['+JS_SPACE+']*(?:;?['+JS_SPACE+']*)$');function
isXmlName(s){return XML_NAME_PATTERN.test(s);}function isXmlNmTokens(s){return XML_NMTOKENS_PATTERN.test(s);}function
trimCssSpaces(input){return input.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,'');}function
sanitizeStyleAttrValue(styleAttrValue){var sanitizedDeclarations=[];var declarations=styleAttrValue.split(/;/g);for(var
i=0;declarations&&i<declarations.length;i++){var parts=declarations[i].split(':');var
property=trimCssSpaces(parts[0]).toLowerCase();var value=trimCssSpaces(parts.slice(1).join(':'));var
stylePropertyName=property.replace(/-[a-z]/g,function(m){return m.substring(1).toUpperCase();});if(css.properties.hasOwnProperty(stylePropertyName)&&css.properties[stylePropertyName].test(value+' ')){sanitizedDeclarations.push(property+': '+value);}}return sanitizedDeclarations.join(' ; ');}function
mimeTypeForAttr(tagName,attribName){if(tagName==='img'&&attribName==='src'){return'image/*';}return'*/*';}function
assert(cond){if(!cond){if(typeof console!=='undefined'){console.log('domita assertion failed');console.trace();}throw new
Error();}}var classUtils=domitaModules.classUtils();var cssSealerUnsealerPair=cajita.makeSealerUnsealerPair();var
timeoutIdTrademark={};function tameSetTimeout(timeout,delayMillis){var timeoutId=setTimeout(function(){___.callPub(timeout,'call',[___.USELESS]);},delayMillis|0);return ___.freeze(___.stamp(timeoutIdTrademark,{'timeoutId___':timeoutId}));}___.frozenFunc(tameSetTimeout);function
tameClearTimeout(timeoutId){___.guard(timeoutIdTrademark,timeoutId);clearTimeout(timeoutId.timeoutId___);}___.frozenFunc(tameClearTimeout);var
intervalIdTrademark={};function tameSetInterval(interval,delayMillis){var intervalId=setInterval(function(){___.callPub(interval,'call',[___.USELESS]);},delayMillis|0);return ___.freeze(___.stamp(intervalIdTrademark,{'intervalId___':intervalId}));}___.frozenFunc(tameSetInterval);function
tameClearInterval(intervalId){___.guard(intervalIdTrademark,intervalId);clearInterval(intervalId.intervalId___);}___.frozenFunc(tameClearInterval);function
attachDocumentStub(idSuffix,uriCallback,imports,pseudoBodyNode){if(arguments.length!==4){throw new
Error('arity mismatch: '+arguments.length);}var elementPolicies={};elementPolicies.form=function(attribs){var
sawHandler=false;for(var i=0,n=attribs.length;i<n;i+=2){if(attribs[i]==='onsubmit'){sawHandler=true;}}if(!sawHandler){attribs.push('onsubmit','return false');}return attribs;};elementPolicies.a=elementPolicies.area=function(attribs){attribs.push('target','_blank');return attribs;};function
sanitizeHtml(htmlText){var out=[];htmlSanitizer(htmlText,out);return out.join('');}var
htmlSanitizer=html.makeHtmlSanitizer(function sanitizeAttributes(tagName,attribs){for(var
i=0;i<attribs.length;i+=2){var attribName=attribs[i];var value=attribs[i+1];var atype=null,attribKey;if((attribKey=tagName+':'+attribName,html4
.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*:'+attribName,html4 .ATTRIBS.hasOwnProperty(attribKey))){atype=html4
.ATTRIBS[attribKey];value=rewriteAttribute(tagName,attribName,atype,value);}else{value=null;}if(value!==null&&value!==void
0){attribs[i+1]=value;}else{attribs.splice(i,2);i-=2;}}var policy=elementPolicies[tagName];if(policy&&elementPolicies.hasOwnProperty(tagName)){return policy(attribs);}return attribs;});function
tameInnerHtml(htmlText){var out=[];innerHtmlTamer(htmlText,out);return out.join('');}var
innerHtmlTamer=html.makeSaxParser({'startTag':function(tagName,attribs,out){out.push('<',tagName);for(var
i=0;i<attribs.length;i+=2){var attribName=attribs[i];if(attribName==='target'){continue;}var
attribKey;var atype;if((attribKey=tagName+':'+attribName,html4 .ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*:'+attribName,html4
.ATTRIBS.hasOwnProperty(attribKey))){atype=html4 .ATTRIBS[attribKey];}else{return'';}var
value=attribs[i+1];switch(atype){case html4 .atype.ID:;case html4 .atype.IDREF:;case
html4 .atype.IDREFS:{if(value.length<=idSuffix.length||idSuffix!==value.substring(value.length-idSuffix.length)){continue;}value=value.substring(0,value.length-idSuffix.length);break;}}if(value!==null){out.push(' ',attribName,'=\"',html.escapeAttrib(value),'\"');}}out.push('>');},'endTag':function(name,out){out.push('</',name,'>');},'pcdata':function(text,out){out.push(text);},'rcdata':function(text,out){out.push(text);},'cdata':function(text,out){out.push(text);}});var
illegalSuffix=/__(?:\s|$)/;function rewriteAttribute(tagName,attribName,type,value){switch(type){case
html4 .atype.ID:;case html4 .atype.IDREF:;case html4 .atype.IDREFS:{value=String(value);if(value&&!illegalSuffix.test(value)&&isXmlName(value)){return value+idSuffix;}return null;}case
html4 .atype.CLASSES:;case html4 .atype.GLOBAL_NAME:;case html4 .atype.LOCAL_NAME:{value=String(value);if(value&&!illegalSuffix.test(value)&&isXmlNmTokens(value)){return value;}return null;}case
html4 .atype.SCRIPT:{value=String(value);var match=value.match(SIMPLE_HANDLER_PATTERN);if(!match){return null;}var
doesReturn=match[1];var fnName=match[2];var pluginId=___.getId(imports);value=(doesReturn?'return ':'')+'plugin_dispatchEvent___('+'this, event, '+pluginId+', \"'+fnName+'\");';if(attribName==='onsubmit'){value='try { '+value+' } finally { return false; }';}return value;}case
html4 .atype.URI:{value=String(value);if(!uriCallback){return null;}return uriCallback.rewrite(value,mimeTypeForAttr(tagName,attribName))||null;}case
html4 .atype.STYLE:{if('function'!==typeof value){return sanitizeStyleAttrValue(String(value));}var
cssPropertiesAndValues=cssSealerUnsealerPair.unseal(value);if(!cssPropertiesAndValues){return null;}var
css=[];for(var i=0;i<cssPropertiesAndValues.length;i+=2){var propName=cssPropertiesAndValues[i];var
propValue=cssPropertiesAndValues[i+1];var semi=propName.indexOf(';');if(semi>=0){propName=propName.substring(0,semi);}css.push(propName+' : '+propValue);}return css.join(' ; ');}case
html4 .atype.FRAME_TARGET:return null;default:return String(value);}}function makeCache(){var
cache=cajita.newTable(false);cache.set(null,null);cache.set(void 0,null);return cache;}var
editableTameNodeCache=makeCache();var readOnlyTameNodeCache=makeCache();function
tameNode(node,editable){if(node===null||node===void 0){return null;}var cache=editable?editableTameNodeCache:readOnlyTameNodeCache;var
tamed=cache.get(node);if(tamed!==void 0){return tamed;}switch(node.nodeType){case
1:{var tagName=node.tagName.toLowerCase();if(!html4 .ELEMENTS.hasOwnProperty(tagName)||html4
.ELEMENTS[tagName]&html4 .eflags.UNSAFE){tamed=new TameOpaqueNode(node,editable);break;}switch(tagName){case'a':{tamed=new
TameAElement(node,editable);break;}case'form':{tamed=new TameFormElement(node,editable);break;}case'select':;case'button':;case'option':;case'textarea':;case'input':{tamed=new
TameInputElement(node,editable);break;}case'img':{tamed=new TameImageElement(node,editable);break;}case'td':;case'tr':;case'thead':;case'tfoot':;case'tbody':;case'th':{tamed=new
TameTableCompElement(node,editable);break;}case'table':{tamed=new TameTableElement(node,editable);break;}default:{tamed=new
TameElement(node,editable);break;}}break;}case 2:{tamed=new TameAttrNode(node,editable);break;}case
3:{tamed=new TameTextNode(node,editable);break;}case 8:{tamed=new TameCommentNode(node,editable);break;}default:{tamed=new
TameOpaqueNode(node,editable);break;}}if(node.nodeType===1){cache.set(node,tamed);}return tamed;}function
tameRelatedNode(node,editable){if(node===null||node===void 0){return null;}try{for(var
ancestor=node;ancestor;ancestor=ancestor.parentNode){if(idClass===ancestor.className){return tameNode(node,editable);}}}catch(e){}return null;}function
tameNodeList(nodeList,editable,opt_keyAttrib){var tamed=[];var node,untamed;for(var
i=0,k=-1,n=nodeList.length;i<n;++i){untamed=nodeList.item(i);if(untamed.nodeName&&endsWith__.test(untamed.nodeName)){continue;}node=tameNode(untamed,editable);tamed[++k]=node;var
key=opt_keyAttrib&&node.getAttribute(opt_keyAttrib);if(key&&!(key.charAt(key.length-1)==='_'||key
in tamed||key===String(key&2147483647))){tamed[key]=node;}}node=nodeList=untamed=null;tamed.item=___.frozenFunc(function(k){k&=2147483647;if(isNaN(k)){throw new
Error();}return tamed[k]||null;});return cajita.freeze(tamed);}function tameGetElementsByTagName(rootNode,tagName,editable){tagName=String(tagName);if(tagName!=='*'){tagName=tagName.toLowerCase();if(!___.hasOwnProp(html4
.ELEMENTS,tagName)||html4 .ELEMENTS[tagName]&html4 .ELEMENTS.UNSAFE){return new fakeNodeList([]);}}return tameNodeList(rootNode.getElementsByTagName(tagName),editable);}function
tameGetElementsByClassName(rootNode,className,editable){className=String(className);var
classes=className.match(/[^\t\n\f\r ]+/g);for(var i=classes.length;--i>=0;){var classi=classes[i];if(illegalSuffix.test(classi)||!isXmlNmTokens(classi)){classes[i]=classes[nClasses-1];--classes.length;}}if(classes.length===0){return fakeNodeList([]);}if(typeof
rootNode.getElementsByClassName==='function'){return tameNodeList(rootNode.getElementsByClassName(classes.join(' ')),editable);}else{var
nClasses=classes.length;for(var i=nClasses;--i>=0;){classes[i]=' '+classes[i]+' ';}var
candidates=rootNode.getElementsByTagName('*');var matches=[];candidate_loop:for(var
j=0,n=candidates.length,k=-1;j<n;++j){var candidate=candidates[j];var candidateClass=' '+candidate.className+' ';for(var
i=nClasses;--i>=0;){if(-1===candidateClass.indexOf(classes[i])){continue candidate_loop;}}var
tamed=tameNode(candidate,editable);if(tamed){matches[++k]=tamed;}}return fakeNodeList(matches);}}function
makeEventHandlerWrapper(thisNode,listener){if('function'!==typeof listener&&!('object'===typeof
listener&&listener!==null&&___.canCallPub(listener,'call'))){throw new Error('Expected function not '+typeof
listener);}function wrapper(event){return plugin_dispatchEvent___(thisNode,event,___.getId(imports),listener);}wrapper.originalListener___=listener;return wrapper;}var
NOT_EDITABLE='Node not editable.';var INVALID_SUFFIX='Property names may not end in \'__\'.';function
tameAddEventListener(name,listener,useCapture){if(!this.editable___){throw new Error(NOT_EDITABLE);}if(!this.wrappedListeners___){this.wrappedListeners___=[];}name=String(name);useCapture=Boolean(useCapture);var
wrappedListener=makeEventHandlerWrapper(this.node___,listener);this.wrappedListeners___.push(wrappedListener);bridal.addEventListener(this.node___,name,wrappedListener,useCapture);}function
tameRemoveEventListener(name,listener,useCapture){if(!this.editable___){throw new
Error(NOT_EDITABLE);}if(!this.wrappedListeners___){return;}var wrappedListener;for(var
i=this.wrappedListeners___.length;--i>=0;){if(this.wrappedListeners___[i].originalListener___===listener){wrappedListener=this.wrappedListeners___[i];arrayRemove(this.wrappedListeners___,i,i);break;}}if(!wrappedListener){return;}name=String(name);bridal.removeEventListener(this.node___,name,wrappedListener,useCapture);}function
tameDispatchEvent(evt){cajita.guard(tameEventTrademark,evt);}var nodeClasses={};var
tameNodeFields=['nodeType','nodeValue','nodeName','firstChild','lastChild','nextSibling','previousSibling','parentNode','ownerDocument','childNodes','attributes'];function
TameNode(editable){this.editable___=editable;___.stamp(tameNodeTrademark,this,true);classUtils.exportFields(this,tameNodeFields);}TameNode.prototype.getOwnerDocument=function(){if(!this.editable___&&tameDocument.editable___){throw new
Error(NOT_EDITABLE);}return tameDocument;};nodeClasses.Node=TameNode;___.ctor(TameNode,void
0,'TameNode');var tameNodeMembers=['getNodeType','getNodeValue','getNodeName','cloneNode','appendChild','insertBefore','removeChild','replaceChild','getFirstChild','getLastChild','getNextSibling','getPreviousSibling','getElementsByClassName','getElementsByTagName','getOwnerDocument','hasChildNodes'];function
TameBackedNode(node,editable){if(!node){throw new Error('Creating tame node with undefined native delegate');}this.node___=node;TameNode.call(this,editable);}classUtils.extend(TameBackedNode,TameNode);TameBackedNode.prototype.getNodeType=function(){return this.node___.nodeType;};TameBackedNode.prototype.getNodeName=function(){return this.node___.nodeName;};TameBackedNode.prototype.getNodeValue=function(){return this.node___.nodeValue;};TameBackedNode.prototype.cloneNode=function(deep){var
clone=bridal.cloneNode(this.node___,Boolean(deep));return tameNode(clone,true);};TameBackedNode.prototype.appendChild=function(child){cajita.guard(tameNodeTrademark,child);if(!this.editable___||!child.editable___){throw new
Error(NOT_EDITABLE);}this.node___.appendChild(child.node___);};TameBackedNode.prototype.insertBefore=function(toInsert,child){cajita.guard(tameNodeTrademark,toInsert);if(child===void
0){child=null;}if(child!==null){cajita.guard(tameNodeTrademark,child);}if(!this.editable___||!toInsert.editable___){throw new
Error(NOT_EDITABLE);}this.node___.insertBefore(toInsert.node___,child!==null?child.node___:null);};TameBackedNode.prototype.removeChild=function(child){cajita.guard(tameNodeTrademark,child);if(!this.editable___||!child.editable___){throw new
Error(NOT_EDITABLE);}this.node___.removeChild(child.node___);};TameBackedNode.prototype.replaceChild=function(child,replacement){cajita.guard(tameNodeTrademark,child);cajita.guard(tameNodeTrademark,replacement);if(!this.editable___||!replacement.editable___){throw new
Error(NOT_EDITABLE);}this.node___.replaceChild(child.node___,replacement.node___);};TameBackedNode.prototype.getFirstChild=function(){return tameNode(this.node___.firstChild,this.editable___);};TameBackedNode.prototype.getLastChild=function(){return tameNode(this.node___.lastChild,this.editable___);};TameBackedNode.prototype.getNextSibling=function(){return tameNode(this.node___.nextSibling,this.editable___);};TameBackedNode.prototype.getPreviousSibling=function(){return tameNode(this.node___.previousSibling,this.editable___);};TameBackedNode.prototype.getParentNode=function(){var
parent=this.node___.parentNode;if(parent===tameDocument.body___){if(tameDocument.editable___&&!this.editable___){throw new
Error(NOT_EDITABLE);}return tameDocument.getBody();}return tameRelatedNode(this.node___.parentNode,this.editable___);};TameBackedNode.prototype.getElementsByTagName=function(tagName){return tameGetElementsByTagName(this.node___,tagName,this.editable___);};TameBackedNode.prototype.getElementsByClassName=function(className){return tameGetElementsByClassName(this.node___,className,this.editable___);};TameBackedNode.prototype.getChildNodes=function(){return tameNodeList(this.node___.childNodes,this.editable___);};TameBackedNode.prototype.getAttributes=function(){return tameNodeList(this.node___.attributes,this.editable___);};var
endsWith__=/__$/;TameBackedNode.prototype.handleRead___=function(name){name=String(name);if(endsWith__.test(name)){return void
0;}var handlerName=name+'_getter___';if(this[handlerName]){return this[handlerName]();}handlerName=handlerName.toLowerCase();if(this[handlerName]){return this[handlerName]();}if(___.hasOwnProp(this.node___.properties___,name)){return this.node___.properties___[name];}else{return void
0;}};TameBackedNode.prototype.handleCall___=function(name,args){name=String(name);if(endsWith__.test(name)){throw new
Error(INVALID_SUFFIX);}var handlerName=name+'_handler___';if(this[handlerName]){return this[handlerName].call(this,args);}handlerName=handlerName.toLowerCase();if(this[handlerName]){return this[handlerName].call(this,args);}if(___.hasOwnProp(this.node___.properties___,name)){return this.node___.properties___[name].call(this,args);}else{throw new
TypeError(name+' is not a function.');}};TameBackedNode.prototype.handleSet___=function(name,val){name=String(name);if(endsWith__.test(name)){throw new
Error(INVALID_SUFFIX);}if(!this.editable___){throw new Error(NOT_EDITABLE);}var handlerName=name+'_setter___';if(this[handlerName]){return this[handlerName](val);}handlerName=handlerName.toLowerCase();if(this[handlerName]){return this[handlerName](val);}if(!this.node___.properties___){this.node___.properties___={};}this[name+'_canEnum___']=true;return this.node___.properties___[name]=val;};TameBackedNode.prototype.handleDelete___=function(name){name=String(name);if(endsWith__.test(name)){throw new
Error(INVALID_SUFFIX);}if(!this.editable___){throw new Error(NOT_EDITABLE);}var handlerName=name+'_deleter___';if(this[handlerName]){return this[handlerName]();}handlerName=handlerName.toLowerCase();if(this[handlerName]){return this[handlerName]();}if(this.node___.properties___){return delete
this.node___.properties___[name]&&delete this[name+'_canEnum___'];}else{return true;}};TameBackedNode.prototype.handleEnum___=function(ownFlag){if(this.node___.properties___){return cajita.allKeys(this.node___.properties___);}return[];};TameBackedNode.prototype.hasChildNodes=function(){return!(!this.node___.hasChildNodes());};___.ctor(TameBackedNode,TameNode,'TameBackedNode');___.all2(___.grantTypedGeneric,TameBackedNode.prototype,tameNodeMembers);function
TamePseudoNode(editable){TameNode.call(this,editable);this.properties___={};}classUtils.extend(TamePseudoNode,TameNode);TamePseudoNode.prototype.appendChild=TamePseudoNode.prototype.insertBefore=TamePseudoNode.prototype.removeChild=TamePseudoNode.prototype.replaceChild=function(child){throw new
Error(NOT_EDITABLE);};TamePseudoNode.prototype.getFirstChild=function(){var children=this.getChildNodes();return children.length?children[0]:null;};TamePseudoNode.prototype.getLastChild=function(){var
children=this.getChildNodes();return children.length?children[children.length-1]:null;};TamePseudoNode.prototype.getNextSibling=function(){var
parentNode=this.getParentNode();if(!parentNode){return null;}var siblings=parentNode.getChildNodes();for(var
i=siblings.length-1;--i>=0;){if(siblings[i]===this){return siblings[i+1];}}return null;};TamePseudoNode.prototype.getPreviousSibling=function(){var
parentNode=this.getParentNode();if(!parentNode){return null;}var siblings=parentNode.getChildNodes();for(var
i=siblings.length;--i>=1;){if(siblings[i]===this){return siblings[i-1];}}return null;};TamePseudoNode.prototype.handleRead___=function(name){var
handlerName=name+'_getter___';if(this[handlerName]){return this[handlerName]();}if(this.properties___.hasOwnProperty(name)){return this.properties___[name];}else{return void
0;}};TamePseudoNode.prototype.handleCall___=function(name,args){var handlerName=name+'_handler___';if(this[handlerName]){return this[handlerName].call(this,args);}if(this.properties___.hasOwnProperty(name)){return this.properties___[name].call(this,args);}else{throw new
TypeError(name+' is not a function.');}};TamePseudoNode.prototype.handleSet___=function(name,val){var
handlerName=name+'_setter___';if(this[handlerName]){return this[handlerName](val);}this[name+'_canEnum___']=true;return this.properties___[name]=val;};TamePseudoNode.prototype.handleDelete___=function(name){var
handlerName=name+'_deleter___';if(this[handlerName]){return this[handlerName]();}if(this.properties___){return delete
this.properties___[name]&&delete this[name+'_canEnum___'];}else{return true;}};TamePseudoNode.prototype.handleEnum___=function(ownFlag){if(this.node___.properties___){return cajita.allKeys(this.node___.properties___);}return[];};TamePseudoNode.prototype.hasChildNodes=function(){return!(!this.node___.hasChildNodes());};___.ctor(TamePseudoNode,TameNode,'TamePseudoNode');___.all2(___.grantTypedGeneric,TamePseudoNode.prototype,tameNodeMembers);function
TamePseudoElement(tagName,tameDoc,childNodesGetter,parentNodeGetter,innerHTMLGetter,editable){TamePseudoNode.call(this,editable);this.tagName___=tagName;this.tameDoc___=tameDoc;this.childNodesGetter___=childNodesGetter;this.parentNodeGetter___=parentNodeGetter;this.innerHTMLGetter___=innerHTMLGetter;classUtils.exportFields(this,['tagName','innerHTML']);}classUtils.extend(TamePseudoElement,TamePseudoNode);TamePseudoElement.prototype.getNodeType=function(){return 1;};TamePseudoElement.prototype.getNodeName=function(){return this.tagName___;};TamePseudoElement.prototype.getTagName=function(){return this.tagName___;};TamePseudoElement.prototype.getNodeValue=function(){return null;};TamePseudoElement.prototype.getAttribute=function(attribName){return'';};TamePseudoElement.prototype.hasAttribute=function(attribName){return false;};TamePseudoElement.prototype.getOwnerDocument=function(){return this.tameDoc___;};TamePseudoElement.prototype.getChildNodes=function(){return this.childNodesGetter___();};TamePseudoElement.prototype.getAttributes=function(){return tameNodeList([],false);};TamePseudoElement.prototype.getParentNode=function(){return this.parentNodeGetter___();};TamePseudoElement.prototype.getInnerHTML=function(){return this.innerHTMLGetter___();};TamePseudoElement.prototype.getElementsByTagName=function(tagName){tagName=String(tagName).toLowerCase();if(tagName===this.tagName___){return fakeNodeList([]);}return this.getOwnerDocument().getElementsByTagName(tagName);};TamePseudoElement.prototype.getElementsByClassName=function(className){return this.getOwnerDocument().getElementsByClassName(className);};TamePseudoElement.prototype.toString=function(){return'<'+this.tagName___+'>';};___.ctor(TamePseudoElement,TamePseudoNode,'TamePseudoElement');___.all2(___.grantTypedGeneric,TameElement.prototype,['getTagName','getAttribute','hasAttribute']);function
TameOpaqueNode(node,editable){TameBackedNode.call(this,node,editable);}classUtils.extend(TameOpaqueNode,TameBackedNode);TameOpaqueNode.prototype.getNodeValue=TameBackedNode.prototype.getNodeValue;TameOpaqueNode.prototype.getNodeType=TameBackedNode.prototype.getNodeType;TameOpaqueNode.prototype.getNodeName=TameBackedNode.prototype.getNodeName;TameOpaqueNode.prototype.getNextSibling=TameBackedNode.prototype.getNextSibling;TameOpaqueNode.prototype.getPreviousSibling=TameBackedNode.prototype.getPreviousSibling;TameOpaqueNode.prototype.getFirstChild=TameBackedNode.prototype.getFirstChild;TameOpaqueNode.prototype.getLastChild=TameBackedNode.prototype.getLastChild;TameOpaqueNode.prototype.getParentNode=TameBackedNode.prototype.getParentNode;TameOpaqueNode.prototype.getChildNodes=TameBackedNode.prototype.getChildNodes;TameOpaqueNode.prototype.getAttributes=function(){return tameNodeList([],false);};for(var
i=tameNodeMembers.length;--i>=0;){var k=tameNodeMembers[i];if(!TameOpaqueNode.prototype.hasOwnProperty(k)){TameOpaqueNode.prototype[k]=___.frozenFunc(function(){throw new
Error('Node is opaque');});}}___.all2(___.grantTypedGeneric,TameOpaqueNode.prototype,tameNodeMembers);function
TameAttrNode(node,editable){assert(node.nodeType===2);TameBackedNode.call(this,node,editable);classUtils.exportFields(this,['name','nodeValue','value','specified']);}classUtils.extend(TameAttrNode,TameBackedNode);nodeClasses.Attr=TameAttrNode;TameAttrNode.prototype.setNodeValue=function(value){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.nodeValue=String(value||'');return value;};TameAttrNode.prototype.getName=TameAttrNode.prototype.getNodeName;TameAttrNode.prototype.getValue=TameAttrNode.prototype.getNodeValue;TameAttrNode.prototype.setValue=TameAttrNode.prototype.setNodeValue;TameAttrNode.prototype.getSpecified=function(){return this.node___.specified;};TameAttrNode.prototype.toString=function(){return'#attr';};___.ctor(TameAttrNode,TameBackedNode,'TameAttrNode');function
TameTextNode(node,editable){assert(node.nodeType===3);TameBackedNode.call(this,node,editable);classUtils.exportFields(this,['nodeValue','data']);}classUtils.extend(TameTextNode,TameBackedNode);nodeClasses.TextNode=TameTextNode;TameTextNode.prototype.setNodeValue=function(value){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.nodeValue=String(value||'');return value;};TameTextNode.prototype.getData=TameTextNode.prototype.getNodeValue;TameTextNode.prototype.setData=TameTextNode.prototype.setNodeValue;TameTextNode.prototype.toString=function(){return'#text';};___.ctor(TameTextNode,TameBackedNode,'TameTextNode');___.all2(___.grantTypedGeneric,TameTextNode.prototype,['setNodeValue','getData','setData']);function
TameCommentNode(node,editable){assert(node.nodeType===8);TameBackedNode.call(this,node,editable);}classUtils.extend(TameCommentNode,TameBackedNode);nodeClasses.CommentNode=TameCommentNode;TameCommentNode.prototype.toString=function(){return'#comment';};___.ctor(TameCommentNode,TameBackedNode,'TameCommentNode');function
getAttributeType(tagName,attribName){var attribKey;attribKey=tagName+':'+attribName;if(html4
.ATTRIBS.hasOwnProperty(attribKey)){return html4 .ATTRIBS[attribKey];}attribKey='*:'+attribName;if(html4
.ATTRIBS.hasOwnProperty(attribKey)){return html4 .ATTRIBS[attribKey];}return void
0;}function TameElement(node,editable){assert(node.nodeType===1);TameBackedNode.call(this,node,editable);classUtils.exportFields(this,['className','id','innerHTML','tagName','style','offsetLeft','offsetTop','offsetWidth','offsetHeight','offsetParent','scrollLeft','scrollTop','scrollWidth','scrollHeight','title','dir']);}classUtils.extend(TameElement,TameBackedNode);nodeClasses.Element=nodeClasses.HTMLElement=TameElement;TameElement.prototype.getId=function(){return this.getAttribute('id')||'';};TameElement.prototype.setId=function(newId){return this.setAttribute('id',newId);};TameElement.prototype.getAttribute=function(attribName){attribName=String(attribName).toLowerCase();var
tagName=this.node___.tagName.toLowerCase();var atype=getAttributeType(tagName,attribName);if(atype===void
0){if(this.node___.attributes___){return this.node___.attributes___[attribName]||null;}return null;}var
value=this.node___.getAttribute(attribName);if('string'!==typeof value){return value;}switch(atype){case
html4 .atype.ID:;case html4 .atype.IDREF:;case html4 .atype.IDREFS:{if(!value){return null;}var
n=idSuffix.length;var len=value.length;var end=len-n;if(end>0&&idSuffix===value.substring(end,len)){return value.substring(0,end);}return null;}default:{if(''===value){var
attr=this.node___.getAttributeNode(attribName);if(attr&&!attr.specified){return null;}}return value;}}};TameElement.prototype.hasAttribute=function(attribName){attribName=String(attribName).toLowerCase();var
tagName=this.node___.tagName.toLowerCase();var atype=getAttributeType(tagName,attribName);if(atype===void
0){return!(!(this.node___.attributes___&&___.hasOwnProp(this.node___.attributes___,attribName)));}else{var
node=this.node___;if(node.hasAttribute){return node.hasAttribute(attribName);}else{var
attr=node.getAttributeNode(attribName);return attr!==null&&attr.specified;}}};TameElement.prototype.setAttribute=function(attribName,value){if(!this.editable___){throw new
Error(NOT_EDITABLE);}attribName=String(attribName).toLowerCase();var tagName=this.node___.tagName.toLowerCase();var
atype=getAttributeType(tagName,attribName);if(atype===void 0){if(!this.node___.attributes___){this.node___.attributes___={};}this.node___.attributes___[attribName]=String(value);}else{var
sanitizedValue=rewriteAttribute(tagName,attribName,atype,value);if(sanitizedValue!==null){bridal.setAttribute(this.node___,attribName,sanitizedValue);}}return value;};TameElement.prototype.removeAttribute=function(attribName){if(!this.editable___){throw new
Error(NOT_EDITABLE);}attribName=String(attribName).toLowerCase();var tagName=this.node___.tagName.toLowerCase();var
atype=getAttributeType(tagName,attribName);if(atype===void 0){if(this.node___.attributes___){delete
this.node___.attributes___[attribName];}}else{this.node___.removeAttribute(attribName);}};TameElement.prototype.getClassName=function(){return this.getAttribute('class')||'';};TameElement.prototype.setClassName=function(classes){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('class',String(classes));};TameElement.prototype.getTitle=function(){return this.getAttribute('title')||'';};TameElement.prototype.setTitle=function(classes){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('title',String(classes));};TameElement.prototype.getDir=function(){return this.getAttribute('dir')||'';};TameElement.prototype.setDir=function(classes){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('dir',String(classes));};TameElement.prototype.getTagName=TameBackedNode.prototype.getNodeName;TameElement.prototype.getInnerHTML=function(){var
tagName=this.node___.tagName.toLowerCase();if(!html4 .ELEMENTS.hasOwnProperty(tagName)){return'';}var
flags=html4 .ELEMENTS[tagName];var innerHtml=this.node___.innerHTML;if(flags&html4
.eflags.CDATA){innerHtml=html.escapeAttrib(innerHtml);}else if(flags&html4 .eflags.RCDATA){innerHtml=html.normalizeRCData(innerHtml);}else{innerHtml=tameInnerHtml(innerHtml);}return innerHtml;};TameElement.prototype.setInnerHTML=function(htmlFragment){if(!this.editable___){throw new
Error(NOT_EDITABLE);}var tagName=this.node___.tagName.toLowerCase();if(!html4 .ELEMENTS.hasOwnProperty(tagName)){throw new
Error();}var flags=html4 .ELEMENTS[tagName];if(flags&html4 .eflags.UNSAFE){throw new
Error();}var sanitizedHtml;if(flags&html4 .eflags.RCDATA){sanitizedHtml=html.normalizeRCData(String(htmlFragment||''));}else{sanitizedHtml=htmlFragment
instanceof Html?safeHtml(htmlFragment):sanitizeHtml(String(htmlFragment||''));}this.node___.innerHTML=sanitizedHtml;return htmlFragment;};TameElement.prototype.setStyle=function(style){this.setAttribute('style',style);return this.getStyle();};TameElement.prototype.getStyle=function(){return new
TameStyle(this.node___.style,this.editable___);};TameElement.prototype.updateStyle=function(style){if(!this.editable___){throw new
Error(NOT_EDITABLE);}var cssPropertiesAndValues=cssSealerUnsealerPair.unseal(style);if(!cssPropertiesAndValues){throw new
Error();}var styleNode=this.node___.style;for(var i=0;i<cssPropertiesAndValues.length;i+=2){var
propName=cssPropertiesAndValues[i];var propValue=cssPropertiesAndValues[i+1];var
semi=propName.indexOf(';');if(semi>=0){propName=propName.substring(semi+1);}styleNode[propName]=propValue;}};TameElement.prototype.getOffsetLeft=function(){return this.node___.offsetLeft;};TameElement.prototype.getOffsetTop=function(){return this.node___.offsetTop;};TameElement.prototype.getOffsetWidth=function(){return this.node___.offsetWidth;};TameElement.prototype.getOffsetHeight=function(){return this.node___.offsetHeight;};TameElement.prototype.getOffsetParent=function(){return tameRelatedNode(this.node___.offsetParent,this.editable___);};TameElement.prototype.getScrollLeft=function(){return this.node___.scrollLeft;};TameElement.prototype.getScrollTop=function(){return this.node___.scrollTop;};TameElement.prototype.getScrollWidth=function(){return this.node___.scrollWidth;};TameElement.prototype.getScrollHeight=function(){return this.node___.scrollHeight;};TameElement.prototype.toString=function(){return'<'+this.node___.tagName+'>';};TameElement.prototype.addEventListener=tameAddEventListener;TameElement.prototype.removeEventListener=tameRemoveEventListener;TameElement.prototype.dispatchEvent=tameDispatchEvent;___.ctor(TameElement,TameBackedNode,'TameElement');___.all2(___.grantTypedGeneric,TameElement.prototype,['addEventListener','removeEventListener','dispatchEvent','getAttribute','setAttribute','removeAttribute','hasAttribute','getClassName','setClassName','getId','setId','getInnerHTML','setInnerHTML','updateStyle','getStyle','setStyle','getTagName','getOffsetLeft','getOffsetTop','getOffsetWidth','getOffsetHeight']);(function(){var
attrNameRe=/:(.*)/;for(var html4Attrib in html4 .ATTRIBS){if(html4 .atype.SCRIPT===html4
.ATTRIBS[html4Attrib]){(function(attribName){___.useSetHandler(TameElement.prototype,attribName,function
eventHandlerSetter(listener){if(!this.editable___){throw new Error(NOT_EDITABLE);}if(!listener){this.node___[attribName]=null;}else{this.node___[attribName]=makeEventHandlerWrapper(this.node___,listener);return listener;}});})((html4Attrib.match(attrNameRe))[1]);}}})();function
TameAElement(node,editable){TameElement.call(this,node,editable);classUtils.exportFields(this,['href']);}classUtils.extend(TameAElement,TameElement);nodeClasses.HTMLAnchorElement=TameAElement;TameAElement.prototype.focus=function(){this.node___.focus();};TameAElement.prototype.getHref=function(){return this.node___.href;};TameAElement.prototype.setHref=function(href){this.setAttribute('href',href);return href;};___.ctor(TameAElement,TameElement,'TameAElement');___.all2(___.grantTypedGeneric,TameAElement.prototype,['getHref','setHref','focus']);function
TameFormElement(node,editable){TameElement.call(this,node,editable);classUtils.exportFields(this,['action','elements','enctype','method','target']);}classUtils.extend(TameFormElement,TameElement);nodeClasses.HTMLFormElement=TameFormElement;TameFormElement.prototype.submit=function(){return this.node___.submit();};TameFormElement.prototype.reset=function(){return this.node___.reset();};TameFormElement.prototype.getAction=function(){return this.getAttribute('action')||'';};TameFormElement.prototype.setAction=function(newVal){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('action',String(newVal));};TameFormElement.prototype.getElements=function(){return tameNodeList(this.node___.elements,this.editable___,'name');};TameFormElement.prototype.getEnctype=function(){return this.getAttribute('enctype')||'';};TameFormElement.prototype.setEnctype=function(newVal){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('enctype',String(newVal));};TameFormElement.prototype.getMethod=function(){return this.getAttribute('method')||'';};TameFormElement.prototype.setMethod=function(newVal){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('method',String(newVal));};TameFormElement.prototype.getTarget=function(){return this.getAttribute('target')||'';};TameFormElement.prototype.setTarget=function(newVal){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.setAttribute('target',String(newVal));};TameFormElement.prototype.reset=function(){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.reset();};TameFormElement.prototype.submit=function(){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.submit();};___.ctor(TameFormElement,TameElement,'TameFormElement');___.all2(___.grantTypedGeneric,TameFormElement.prototype,['getElements','reset','submit']);function
TameInputElement(node,editable){TameElement.call(this,node,editable);classUtils.exportFields(this,['form','value','defaultValue','checked','disabled','readOnly','options','selected','selectedIndex','name','accessKey','tabIndex','text','defaultChecked','defaultSelected','maxLength','size','type','index','label','multiple','cols','rows']);}classUtils.extend(TameInputElement,TameElement);nodeClasses.HTMLInputElement=TameInputElement;TameInputElement.prototype.getChecked=function(){return this.node___.checked;};TameInputElement.prototype.setChecked=function(checked){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return this.node___.checked=!(!checked);};TameInputElement.prototype.getValue=function(){var
value=this.node___.value;return value===null||value===void 0?null:String(value);};TameInputElement.prototype.setValue=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.value=newValue===null||newValue===void 0?'':''+newValue;return newValue;};TameInputElement.prototype.getDefaultValue=function(){var
value=this.node___.defaultValue;return value===null||value===void 0?null:String(value);};TameInputElement.prototype.setDefaultValue=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.defaultValue=newValue===null||newValue===void 0?'':''+newValue;return newValue;};TameInputElement.prototype.focus=function(){this.node___.focus();};TameInputElement.prototype.blur=function(){this.node___.blur();};TameInputElement.prototype.select=function(){this.node___.select();};TameInputElement.prototype.getForm=function(){return tameRelatedNode(this.node___.form,this.editable___);};TameInputElement.prototype.getDisabled=function(){return this.node___.disabled;};TameInputElement.prototype.setDisabled=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.disabled=newValue;return newValue;};TameInputElement.prototype.getReadOnly=function(){return this.node___.readOnly;};TameInputElement.prototype.setReadOnly=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.readOnly=newValue;return newValue;};TameInputElement.prototype.getOptions=function(){return tameNodeList(this.node___.options,this.editable___,'name');};TameInputElement.prototype.getDefaultSelected=function(){return this.node___.defaultSelected;};TameInputElement.prototype.setDefaultSelected=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.defaultSelected=!(!newValue);return newValue;};TameInputElement.prototype.getSelected=function(){return this.node___.selected;};TameInputElement.prototype.setSelected=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.selected=newValue;return newValue;};TameInputElement.prototype.getSelectedIndex=function(){return this.node___.selectedIndex;};TameInputElement.prototype.setSelectedIndex=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.selectedIndex=newValue|0;return newValue;};TameInputElement.prototype.getName=function(){return this.node___.name;};TameInputElement.prototype.setName=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.name=newValue;return newValue;};TameInputElement.prototype.getAccessKey=function(){return this.node___.accessKey;};TameInputElement.prototype.setAccessKey=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.accessKey=newValue;return newValue;};TameInputElement.prototype.getTabIndex=function(){return this.node___.tabIndex;};TameInputElement.prototype.getText=function(){return String(this.node___.text);};TameInputElement.prototype.setTabIndex=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.tabIndex=newValue;return newValue;};TameInputElement.prototype.getDefaultChecked=function(){return this.node___.defaultChecked;};TameInputElement.prototype.setDefaultChecked=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.defaultChecked=newValue;return newValue;};TameInputElement.prototype.getMaxLength=function(){return this.node___.maxLength;};TameInputElement.prototype.setMaxLength=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.maxLength=newValue;return newValue;};TameInputElement.prototype.getSize=function(){return this.node___.size;};TameInputElement.prototype.setSize=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.size=newValue;return newValue;};TameInputElement.prototype.getType=function(){return String(this.node___.type);};TameInputElement.prototype.setType=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.type=newValue;return newValue;};TameInputElement.prototype.getIndex=function(){return this.node___.index;};TameInputElement.prototype.setIndex=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.index=newValue;return newValue;};TameInputElement.prototype.getLabel=function(){return this.node___.label;};TameInputElement.prototype.setLabel=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.label=newValue;return newValue;};TameInputElement.prototype.getMultiple=function(){return this.node___.multiple;};TameInputElement.prototype.setMultiple=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.multiple=newValue;return newValue;};TameInputElement.prototype.getCols=function(){return this.node___.cols;};TameInputElement.prototype.setCols=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.cols=newValue;return newValue;};TameInputElement.prototype.getRows=function(){return this.node___.rows;};TameInputElement.prototype.setRows=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.rows=newValue;return newValue;};___.ctor(TameInputElement,TameElement,'TameInputElement');___.all2(___.grantTypedGeneric,TameInputElement.prototype,['getValue','setValue','focus','getForm','getType','select']);function
TameImageElement(node,editable){TameElement.call(this,node,editable);classUtils.exportFields(this,['src','alt']);}classUtils.extend(TameImageElement,TameElement);nodeClasses.HTMLImageElement=TameImageElement;TameImageElement.prototype.getSrc=function(){return this.node___.src;};TameImageElement.prototype.setSrc=function(src){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.setAttribute('src',src);return src;};TameImageElement.prototype.getAlt=function(){return this.node___.alt;};TameImageElement.prototype.setAlt=function(src){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.alt=src;return src;};___.ctor(TameImageElement,TameElement,'TameImageElement');___.all2(___.grantTypedGeneric,TameImageElement.prototype,['getSrc','setSrc','getAlt','setAlt']);function
TameTableCompElement(node,editable){TameElement.call(this,node,editable);classUtils.exportFields(this,['colSpan','cells','rowSpan','rows','rowIndex','align','vAlign','nowrap']);}classUtils.extend(TameTableCompElement,TameElement);TameTableCompElement.prototype.getColSpan=function(){return this.node___.colSpan;};TameTableCompElement.prototype.setColSpan=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.colSpan=newValue;return newValue;};TameTableCompElement.prototype.getCells=function(){return tameNodeList(this.node___.cells,this.editable___);};TameTableCompElement.prototype.getRowSpan=function(){return this.node___.rowSpan;};TameTableCompElement.prototype.setRowSpan=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.rowSpan=newValue;return newValue;};TameTableCompElement.prototype.getRows=function(){return tameNodeList(this.node___.rows,this.editable___);};TameTableCompElement.prototype.getRowIndex=function(){return this.node___.rowIndex;};TameTableCompElement.prototype.getAlign=function(){return this.node___.align;};TameTableCompElement.prototype.setAlign=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.align=newValue;return newValue;};TameTableCompElement.prototype.getVAlign=function(){return this.node___.vAlign;};TameTableCompElement.prototype.setVAlign=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.vAlign=newValue;return newValue;};TameTableCompElement.prototype.getNowrap=function(){return this.node___.nowrap;};TameTableCompElement.prototype.setNowrap=function(newValue){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.nowrap=newValue;return newValue;};___.ctor(TameTableCompElement,TameElement,'TameTableCompElement');function
TameTableElement(node,editable){TameTableCompElement.call(this,node,editable);classUtils.exportFields(this,['tBodies','tHead','tFoot']);}classUtils.extend(TameTableElement,TameTableCompElement);nodeClasses.HTMLTableElement=TameTableElement;TameTableElement.prototype.getTBodies=function(){return tameNodeList(this.node___.tBodies,this.editable___);};TameTableElement.prototype.getTHead=function(){return tameNode(this.node___.tHead,this.editable___);};TameTableElement.prototype.getTFoot=function(){return tameNode(this.node___.tFoot,this.editable___);};TameTableElement.prototype.createTHead=function(){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return tameNode(this.node___.createTHead(),this.editable___);};TameTableElement.prototype.deleteTHead=function(){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.deleteTHead();};TameTableElement.prototype.createTFoot=function(){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return tameNode(this.node___.createTFoot(),this.editable___);};TameTableElement.prototype.deleteTFoot=function(){if(!this.editable___){throw new
Error(NOT_EDITABLE);}this.node___.deleteTFoot();};___.ctor(TameTableElement,TameTableCompElement,'TameTableElement');___.all2(___.grantTypedGeneric,TameTableElement.prototype,['createTHead','deleteTHead','createTFoot','deleteTFoot']);function
TameEvent(event){this.event___=event;___.stamp(tameEventTrademark,this,true);classUtils.exportFields(this,['type','target','pageX','pageY','altKey','ctrlKey','metaKey','shiftKey','button','screenX','screenY','relatedTarget','fromElement','toElement','srcElement','clientX','clientY','keyCode','which']);}nodeClasses.Event=TameEvent;TameEvent.prototype.getType=function(){return String(this.event___.type);};TameEvent.prototype.getTarget=function(){var
event=this.event___;return tameRelatedNode(event.target||event.srcElement,true);};TameEvent.prototype.getSrcElement=function(){return tameRelatedNode(this.event___.srcElement,true);};TameEvent.prototype.getRelatedTarget=function(){var
e=this.event___;var t=e.relatedTarget;if(!t){if(e.type==='mouseout'){t=e.toElement;}else
if(e.type==='mouseover'){t=e.fromElement;}}return tameRelatedNode(t,true);};TameEvent.prototype.getFromElement=function(){return tameRelatedNode(this.event___.fromElement,true);};TameEvent.prototype.getToElement=function(){return tameRelatedNode(this.event___.toElement,true);};TameEvent.prototype.getPageX=function(){return Number(this.event___.pageX);};TameEvent.prototype.getPageY=function(){return Number(this.event___.pageY);};TameEvent.prototype.stopPropagation=function(){if(this.event___.stopPropagation){this.event___.stopPropagation();}else{this.event___.cancelBubble=true;}};TameEvent.prototype.preventDefault=function(){if(this.event___.preventDefault){this.event___.preventDefault();}else{this.event___.returnValue=false;}};TameEvent.prototype.getAltKey=function(){return Boolean(this.event___.altKey);};TameEvent.prototype.getCtrlKey=function(){return Boolean(this.event___.ctrlKey);};TameEvent.prototype.getMetaKey=function(){return Boolean(this.event___.metaKey);};TameEvent.prototype.getShiftKey=function(){return Boolean(this.event___.shiftKey);};TameEvent.prototype.getButton=function(){var
e=this.event___;return e.button&&Number(e.button);};TameEvent.prototype.getClientX=function(){return Number(this.event___.clientX);};TameEvent.prototype.getClientY=function(){return Number(this.event___.clientY);};TameEvent.prototype.getScreenX=function(){return Number(this.event___.screenX);};TameEvent.prototype.getScreenY=function(){return Number(this.event___.screenY);};TameEvent.prototype.getWhich=function(){var
w=this.event___.which;return w&&Number(w);};TameEvent.prototype.getKeyCode=function(){var
kc=this.event___.keyCode;return kc&&Number(kc);};TameEvent.prototype.toString=function(){return'Not a real event';};___.ctor(TameEvent,void
0,'TameEvent');___.all2(___.grantTypedGeneric,TameEvent.prototype,['getType','getTarget','getPageX','getPageY','stopPropagation','getAltKey','getCtrlKey','getMetaKey','getShiftKey','getButton','getClientX','getClientY','getScreenX','getScreenY','getRelatedTarget','getFromElement','getToElement','getSrcElement','preventDefault','getKeyCode','getWhich']);function
fakeNodeList(array){array.item=___.func(function(i){return array[i];});return cajita.freeze(array);}function
TameHTMLDocument(doc,body,editable){TamePseudoNode.call(this,editable);this.doc___=doc;this.body___=body;var
tameDoc=this;var tameBody=tameNode(body,editable);var tameBodyElement=new TamePseudoElement('BODY',this,function(){return tameNodeList(body.childNodes,editable);},function(){return tameHtmlElement;},function(){return tameInnerHtml(body.innerHTML);},editable);cajita.forOwnKeys({'appendChild':0,'removeChild':0,'insertBefore':0,'replaceChild':0},___.frozenFunc(function(k){tameBodyElement[k]=tameBody[k].bind(tameBody);___.grantFunc(tameBodyElement,k);}));var
title=doc.createTextNode(body.getAttribute('title')||'');var tameTitleElement=new
TamePseudoElement('TITLE',this,function(){return[tameNode(title,false)];},function(){return tameHeadElement;},function(){return html.escapeAttrib(title.nodeValue);},editable);var
tameHeadElement=new TamePseudoElement('HEAD',this,function(){return[tameTitleElement];},function(){return tameHtmlElement;},function(){return'<title>'+tameTitleElement.getInnerHTML()+'</title>';},editable);var
tameHtmlElement=new TamePseudoElement('HTML',this,function(){return[tameHeadElement,tameBodyElement];},function(){return tameDoc;},function(){return'<head>'+tameHeadElement.getInnerHTML+'</head><body>'+tameBodyElement.getInnerHTML()+'</body>';},editable);this.documentElement___=tameHtmlElement;classUtils.exportFields(this,['documentElement','body','title']);}classUtils.extend(TameHTMLDocument,TamePseudoNode);nodeClasses.HTMLDocument=TameHTMLDocument;TameHTMLDocument.prototype.getNodeType=function(){return 9;};TameHTMLDocument.prototype.getNodeName=function(){return'#document';};TameHTMLDocument.prototype.getNodeValue=function(){return null;};TameHTMLDocument.prototype.getChildNodes=function(){return[this.documentElement___];};TameHTMLDocument.prototype.getAttributes=function(){return[];};TameHTMLDocument.prototype.getParentNode=function(){return null;};TameHTMLDocument.prototype.getElementsByTagName=function(tagName){tagName=String(tagName).toLowerCase();switch(tagName){case'body':return fakeNodeList([this.getBody()]);case'head':return fakeNodeList([this.getHead()]);case'title':return fakeNodeList([this.getTitle()]);default:return tameGetElementsByTagName(this.body___,tagName,this.editable___);}};TameHTMLDocument.prototype.getDocumentElement=function(){return this.documentElement___;};TameHTMLDocument.prototype.getBody=function(){return this.documentElement___.getLastChild();};TameHTMLDocument.prototype.getHead=function(){return this.documentElement___.getFirstChild();};TameHTMLDocument.prototype.getTitle=function(){return this.getHead().getFirstChild();};TameHTMLDocument.prototype.getElementsByClassName=function(className){return tameGetElementsByClassName(this.body___,className,this.editable___);};TameHTMLDocument.prototype.addEventListener=function(name,listener,useCapture){};TameHTMLDocument.prototype.removeEventListener=function(name,listener,useCapture){};TameHTMLDocument.prototype.dispatchEvent=function(evt){};TameHTMLDocument.prototype.createElement=function(tagName){if(!this.editable___){throw new
Error(NOT_EDITABLE);}tagName=String(tagName).toLowerCase();if(!html4 .ELEMENTS.hasOwnProperty(tagName)){throw new
Error();}var flags=html4 .ELEMENTS[tagName];if(flags&html4 .eflags.UNSAFE){throw new
Error();}var newEl=this.doc___.createElement(tagName);if(elementPolicies.hasOwnProperty(tagName)){var
attribs=elementPolicies[tagName]([]);if(attribs){for(var i=0;i<attribs.length;i+=2){bridal.setAttribute(newEl,attribs[i],attribs[i+1]);}}}return tameNode(newEl,true);};TameHTMLDocument.prototype.createTextNode=function(text){if(!this.editable___){throw new
Error(NOT_EDITABLE);}return tameNode(this.doc___.createTextNode(text!==null&&text!==void
0?''+text:''),true);};TameHTMLDocument.prototype.getElementById=function(id){id+=idSuffix;var
node=this.doc___.getElementById(id);return tameNode(node,this.editable___);};TameHTMLDocument.prototype.toString=function(){return'[Fake Document]';};TameHTMLDocument.prototype.write=function(text){cajita.log('Called document.write() with: '+text);};___.ctor(TameHTMLDocument,TamePseudoNode,'TameHTMLDocument');___.all2(___.grantTypedGeneric,TameHTMLDocument.prototype,['addEventListener','removeEventListener','dispatchEvent','createElement','createTextNode','getElementById','getElementsByClassName','getElementsByTagName','write']);imports.tameNode___=tameNode;imports.tameEvent___=function(event){return new
TameEvent(event);};imports.blessHtml___=blessHtml;imports.blessCss___=function(var_args){var
arr=[];for(var i=0,n=arguments.length;i<n;++i){arr[i]=arguments[i];}return cssSealerUnsealerPair.seal(arr);};imports.htmlAttr___=function(s){return html.escapeAttrib(String(s||''));};imports.html___=safeHtml;imports.rewriteUri___=function(uri,mimeType){var
s=rewriteAttribute(null,null,html4 .atype.URI,uri);if(!s){throw new Error();}return s;};imports.suffix___=function(nmtokens){var
p=String(nmtokens).replace(/^\s+|\s+$/g,'').split(/\s+/g);var out=[];for(var i=0;i<p.length;++i){var
nmtoken=rewriteAttribute(null,null,html4 .atype.ID,p[i]);if(!nmtoken){throw new Error(nmtokens);}out.push(nmtoken);}return out.join(' ');};imports.ident___=function(nmtokens){var
p=String(nmtokens).replace(/^\s+|\s+$/g,'').split(/\s+/g);var out=[];for(var i=0;i<p.length;++i){var
nmtoken=rewriteAttribute(null,null,html4 .atype.CLASSES,p[i]);if(!nmtoken){throw new
Error(nmtokens);}out.push(nmtoken);}return out.join(' ');};function TameStyle(style,editable){this.style___=style;this.editable___=editable;}nodeClasses.Style=TameStyle;for(var
styleProperty in css.properties){if(!cajita.canEnumOwn(css.properties,styleProperty)){continue;}(function(propertyName){___.useGetHandler(TameStyle.prototype,propertyName,function(){if(!this.style___){return void
0;}return String(this.style___[propertyName]||'');});var pattern=css.properties[propertyName];___.useSetHandler(TameStyle.prototype,propertyName,function(val){if(!this.editable___){throw new
Error('style not editable');}val=''+(val||'');if(val&&!pattern.test(val+' ')){throw new
Error('bad value `'+val+'` for CSS property '+propertyName);}val=val.replace(/\burl\s*\(\s*\"([^\"]*)\"\s*\)/gi,function(_,url){throw new
Error('url in style '+url);});this.style___[propertyName]=val;});})(styleProperty);}TameStyle.prototype.toString=function(){return'[Fake Style]';};var
COMPUTED_STYLE_WHITELIST={'display':true,'filter':true,'float':true,'height':true,'opacity':true,'overflow':true,'position':true,'visibility':true,'width':true};function
TameComputedStyle(style){this.style___=style;}cajita.forOwnKeys(COMPUTED_STYLE_WHITELIST,___.func(function(propertyName,_){___.useGetHandler(TameComputedStyle.prototype,propertyName,function(){if(!this.style___){return void
0;}return String(this.style___[propertyName]||'');});}));TameComputedStyle.prototype.toString=function(){return'[Fake Computed Style]';};nodeClasses.XMLHttpRequest=domitaModules.TameXMLHttpRequest(domitaModules.XMLHttpRequestCtor(window.XMLHttpRequest,window.ActiveXObject),uriCallback);imports.cssNumber___=function(num){if('number'===typeof
num&&isFinite(num)&&!isNaN(num)){return''+num;}throw new Error(num);};imports.cssColor___=function(color){if('number'!==typeof
color||color!=(color|0)){throw new Error(color);}var hex='0123456789abcdef';return'#'+hex.charAt(color>>20&15)+hex.charAt(color>>16&15)+hex.charAt(color>>12&15)+hex.charAt(color>>8&15)+hex.charAt(color>>4&15)+hex.charAt(color&15);};imports.cssUri___=function(uri,mimeType){var
s=rewriteAttribute(null,null,html4 .atype.URI,uri);if(!s){throw new Error();}return s;};imports.emitCss___=function(cssText){this.getCssContainer___().appendChild(bridal.createStylesheet(document,cssText));};imports.getCssContainer___=function(){return(document.getElementsByTagName('head'))[0];};if(!/^-/.test(idSuffix)){throw new
Error('id suffix \"'+idSuffix+'\" must start with \"-\"');}var idClass=idSuffix.substring(1);imports.getIdClass___=function(){return idClass;};imports.setTimeout=tameSetTimeout;imports.setInterval=tameSetInterval;imports.clearTimeout=tameClearTimeout;imports.clearInterval=tameClearInterval;var
tameDocument=new TameHTMLDocument(document,pseudoBodyNode,true);imports.document=tameDocument;var
tameLocation=___.primFreeze({'toString':___.frozenFunc(function(){return tameLocation.href;}),'href':'http://nosuchhost,fake/','hash':'','host':'nosuchhost,fake','hostname':'nosuchhost,fake','pathname':'/','port':'','protocol':'http:','search':''});var
tameNavigator=___.primFreeze({'appCodeName':'Caja','appName':'Sandbox','appVersion':'1.0','language':'','platform':'Caja','oscpu':'Caja','vendor':'','vendorSub':'','product':'Caja','productSub':'','userAgent':'Caja/1.0'});var
PSEUDO_ELEMENT_WHITELIST={'first-letter':true,'first-line':true};var tameWindow={'document':imports.document,'location':tameLocation,'navigator':tameNavigator,'setTimeout':tameSetTimeout,'setInterval':tameSetInterval,'clearTimeout':tameClearTimeout,'clearInterval':tameClearInterval,'scrollTo':___.frozenFunc(function(x,y){if('number'===typeof
x&&'number'===typeof y&&!isNaN(x-y)&&imports.isProcessingEvent___){window.scrollTo(x,y);}}),'addEventListener':___.frozenFunc(function(name,listener,useCapture){}),'removeEventListener':___.frozenFunc(function(name,listener,useCapture){}),'dispatchEvent':___.frozenFunc(function(evt){}),'getComputedStyle':___.frozenFunc(function(tameElement,pseudoElement){cajita.guard(tameNodeTrademark,tameElement);pseudoElement=pseudoElement===null||pseudoElement===void
0?void 0:String(pseudoElement).toLowerCase();if(pseudoElement!==void 0&&!PSEUDO_ELEMENT_WHITELIST.hasOwnProperty(pseudoElement)){throw new
Error('Bad pseudo class '+pseudoElement);}var rawNode=tameElement.node___;if(rawNode.currentStyle&&pseudoElement===void
0){return new TameComputedStyle(rawNode.currentStyle);}else if(window.getComputedStyle){var
rawStyleNode=window.getComputedStyle(tameElement.node___,pseudoElement);return new
TameComputedStyle(rawStyleNode);}else{throw new Error('Computed style not available for pseudo element '+pseudoElement);}})};tameWindow.top=tameWindow.self=tameWindow.opener=tameWindow.parent=tameWindow.window=tameWindow;cajita.forOwnKeys(nodeClasses,___.func(function(name,ctor){___.primFreeze(ctor);tameWindow[name]=ctor;___.grantRead(tameWindow,name);}));var
defaultNodeClasses=['HTMLAppletElement','HTMLAreaElement','HTMLBaseElement','HTMLBaseFontElement','HTMLBodyElement','HTMLBRElement','HTMLButtonElement','HTMLDirectoryElement','HTMLDivElement','HTMLDListElement','HTMLFieldSetElement','HTMLFontElement','HTMLFrameElement','HTMLFrameSetElement','HTMLHeadElement','HTMLHeadingElement','HTMLHRElement','HTMLHtmlElement','HTMLIFrameElement','HTMLIsIndexElement','HTMLLabelElement','HTMLLegendElement','HTMLLIElement','HTMLLinkElement','HTMLMapElement','HTMLMenuElement','HTMLMetaElement','HTMLModElement','HTMLObjectElement','HTMLOListElement','HTMLOptGroupElement','HTMLOptionElement','HTMLParagraphElement','HTMLParamElement','HTMLPreElement','HTMLQuoteElement','HTMLScriptElement','HTMLSelectElement','HTMLStyleElement','HTMLTableCaptionElement','HTMLTableCellElement','HTMLTableColElement','HTMLTableElement','HTMLTableRowElement','HTMLTableSectionElement','HTMLTextAreaElement','HTMLTitleElement','HTMLUListElement'];var
defaultNodeClassCtor=___.primFreeze(TameElement);for(var i=0;i<defaultNodeClasses.length;i++){tameWindow[defaultNodeClasses[i]]=defaultNodeClassCtor;___.grantRead(tameWindow,defaultNodeClasses[i]);}var
outers=imports.outers;if(___.isJSONContainer(outers)){for(var k in tameWindow){if(!___.hasOwnProp(outers,k)&&___.canEnumPub(tameWindow,k)){var
v=tameWindow[k];outers[k]=v===tameWindow?outers:v;}}outers.window=outers;}else{cajita.freeze(tameWindow);imports.window=tameWindow;}}return attachDocumentStub;})();function
plugin_dispatchEvent___(thisNode,event,pluginId,handler){event=event||window.event;if(typeof
console!=='undefined'&&console.log){var sig=String(handler).match(/^function\b[^\)]*\)/);console.log('Dispatch %s event thisNode=%o, event=%o, pluginId=%o, handler=%o',event&&event.type,thisNode,event,pluginId,sig?sig[0]:handler);}var
imports=___.getImports(pluginId);switch(typeof handler){case'string':{handler=imports[handler];break;}case'function':;case'object':break;default:throw new
Error('Expected function as event handler, not '+typeof handler);}if(___.startCallerStack){___.startCallerStack();}imports.isProcessingEvent___=true;try{return ___.callPub(handler,'call',[imports.tameNode___(thisNode,true),imports.tameEvent___(event)]);}catch(ex){if(ex&&ex.cajitaStack___&&'undefined'!==typeof
console){console.error('Event dispatch %s: %s',handler,___.unsealCallerStack(ex.cajitaStack___).join('\n'));}throw ex;}finally{imports.isProcessingEvent___=false;}}}{var
PR_SHOULD_USE_CONTINUATION=true;var PR_TAB_WIDTH=8;var PR_normalizedHtml;var PR;var
prettyPrintOne;var prettyPrint;function _pr_isIE6(){var isIE6=navigator&&navigator.userAgent&&/\bMSIE 6\./.test(navigator.userAgent);_pr_isIE6=function(){return isIE6;};return isIE6;}(function(){function
wordSet(words){words=words.split(/ /g);var set={};for(var i=words.length;--i>=0;){var
w=words[i];if(w){set[w]=null;}}return set;}var FLOW_CONTROL_KEYWORDS='break continue do else for if return while ';var
C_KEYWORDS=FLOW_CONTROL_KEYWORDS+'auto case char const default '+'double enum extern float goto int long register short signed sizeof '+'static struct switch typedef union unsigned void volatile ';var
COMMON_KEYWORDS=C_KEYWORDS+'catch class delete false import '+'new operator private protected public this throw true try ';var
CPP_KEYWORDS=COMMON_KEYWORDS+'alignof align_union asm axiom bool '+'concept concept_map const_cast constexpr decltype '+'dynamic_cast explicit export friend inline late_check '+'mutable namespace nullptr reinterpret_cast static_assert static_cast '+'template typeid typename typeof using virtual wchar_t where ';var
JAVA_KEYWORDS=COMMON_KEYWORDS+'boolean byte extends final finally implements import instanceof null '+'native package strictfp super synchronized throws transient ';var
CSHARP_KEYWORDS=JAVA_KEYWORDS+'as base by checked decimal delegate descending event '+'fixed foreach from group implicit in interface internal into is lock '+'object out override orderby params readonly ref sbyte sealed '+'stackalloc string select uint ulong unchecked unsafe ushort var ';var
JSCRIPT_KEYWORDS=COMMON_KEYWORDS+'debugger eval export function get null set undefined var with '+'Infinity NaN ';var
PERL_KEYWORDS='caller delete die do dump elsif eval exit foreach for '+'goto if import last local my next no our print package redo require '+'sub undef unless until use wantarray while BEGIN END ';var
PYTHON_KEYWORDS=FLOW_CONTROL_KEYWORDS+'and as assert class def del '+'elif except exec finally from global import in is lambda '+'nonlocal not or pass print raise try with yield '+'False True None ';var
RUBY_KEYWORDS=FLOW_CONTROL_KEYWORDS+'alias and begin case class def'+' defined elsif end ensure false in module next nil not or redo rescue '+'retry self super then true undef unless until when yield BEGIN END ';var
SH_KEYWORDS=FLOW_CONTROL_KEYWORDS+'case done elif esac eval fi '+'function in local set then until ';var
ALL_KEYWORDS=CPP_KEYWORDS+CSHARP_KEYWORDS+JSCRIPT_KEYWORDS+PERL_KEYWORDS+PYTHON_KEYWORDS+RUBY_KEYWORDS+SH_KEYWORDS;var
PR_STRING='str';var PR_KEYWORD='kwd';var PR_COMMENT='com';var PR_TYPE='typ';var PR_LITERAL='lit';var
PR_PUNCTUATION='pun';var PR_PLAIN='pln';var PR_TAG='tag';var PR_DECLARATION='dec';var
PR_SOURCE='src';var PR_ATTRIB_NAME='atn';var PR_ATTRIB_VALUE='atv';var PR_NOCODE='nocode';function
isWordChar(ch){return ch>='a'&&ch<='z'||ch>='A'&&ch<='Z';}function spliceArrayInto(inserted,container,containerPosition,countReplaced){inserted.unshift(containerPosition,countReplaced||0);try{container.splice.apply(container,inserted);}finally{inserted.splice(0,2);}}var
REGEXP_PRECEDER_PATTERN=(function(){var preceders=['!','!=','!==','#','%','%=','&','&&','&&=','&=','(','*','*=','+=',',','-=','->','/','/=',':','::',';','<','<<','<<=','<=','=','==','===','>','>=','>>','>>=','>>>','>>>=','?','@','[','^','^=','^^','^^=','{','|','|=','||','||=','~','break','case','continue','delete','do','else','finally','instanceof','return','throw','try','typeof'];var
pattern='(?:'+'(?:(?:^|[^0-9.])\\.{1,3})|'+'(?:(?:^|[^\\+])\\+)|'+'(?:(?:^|[^\\-])-)';for(var
i=0;i<preceders.length;++i){var preceder=preceders[i];if(isWordChar(preceder.charAt(0))){pattern+='|\\b'+preceder;}else{pattern+='|'+preceder.replace(/([^=<>:&])/g,'\\$1');}}pattern+='|^)\\s*$';return new
RegExp(pattern);})();var pr_amp=/&/g;var pr_lt=/</g;var pr_gt=/>/g;var pr_quot=/\"/g;function
attribToHtml(str){return str.replace(pr_amp,'&amp;').replace(pr_lt,'&lt;').replace(pr_gt,'&gt;').replace(pr_quot,'&quot;');}function
textToHtml(str){return str.replace(pr_amp,'&amp;').replace(pr_lt,'&lt;').replace(pr_gt,'&gt;');}var
pr_ltEnt=/&lt;/g;var pr_gtEnt=/&gt;/g;var pr_aposEnt=/&apos;/g;var pr_quotEnt=/&quot;/g;var
pr_ampEnt=/&amp;/g;var pr_nbspEnt=/&nbsp;/g;function htmlToText(html){var pos=html.indexOf('&');if(pos<0){return html;}for(--pos;(pos=html.indexOf('&#',pos+1))>=0;){var
end=html.indexOf(';',pos);if(end>=0){var num=html.substring(pos+3,end);var radix=10;if(num&&num.charAt(0)==='x'){num=num.substring(1);radix=16;}var
codePoint=parseInt(num,radix);if(!isNaN(codePoint)){html=html.substring(0,pos)+String.fromCharCode(codePoint)+html.substring(end+1);}}}return html.replace(pr_ltEnt,'<').replace(pr_gtEnt,'>').replace(pr_aposEnt,'\'').replace(pr_quotEnt,'\"').replace(pr_ampEnt,'&').replace(pr_nbspEnt,' ');}function
isRawContent(node){return'XMP'===node.tagName;}function normalizedHtml(node,out){switch(node.nodeType){case
1:{var name=node.tagName.toLowerCase();out.push('<',name);for(var i=0;i<node.attributes.length;++i){var
attr=node.attributes[i];if(!attr.specified){continue;}out.push(' ');normalizedHtml(attr,out);}out.push('>');for(var
child=node.firstChild;child;child=child.nextSibling){normalizedHtml(child,out);}if(node.firstChild||!/^(?:br|link|img)$/.test(name)){out.push('</',name,'>');}break;}case
2:{out.push(node.name.toLowerCase(),'=\"',attribToHtml(node.value),'\"');break;}case
3:;case 4:{out.push(textToHtml(node.nodeValue));break;}}}var PR_innerHtmlWorks=null;function
getInnerHtml(node){if(null===PR_innerHtmlWorks){var testNode=document.createElement('PRE');testNode.appendChild(document.createTextNode('<!DOCTYPE foo PUBLIC \"foo bar\">\n<foo />'));PR_innerHtmlWorks=!/</.test(testNode.innerHTML);}if(PR_innerHtmlWorks){var
content=node.innerHTML;if(isRawContent(node)){content=textToHtml(content);}return content;}var
out=[];for(var child=node.firstChild;child;child=child.nextSibling){normalizedHtml(child,out);}return out.join('');}function
makeTabExpander(tabWidth){var SPACES='                ';var charInLine=0;return function(plainText){var
out=null;var pos=0;for(var i=0,n=plainText.length;i<n;++i){var ch=plainText.charAt(i);switch(ch){case'	':{if(!out){out=[];}out.push(plainText.substring(pos,i));var
nSpaces=tabWidth-charInLine%tabWidth;charInLine+=nSpaces;for(;nSpaces>=0;nSpaces-=SPACES.length){out.push(SPACES.substring(0,nSpaces));}pos=i+1;break;}case'\n':{charInLine=0;break;}default:++charInLine;}}if(!out){return plainText;}out.push(plainText.substring(pos));return out.join('');};}var
pr_chunkPattern=/(?:[^<]+|<!--[\s\S]*?-->|<!\[CDATA\[([\s\S]*?)\]\]>|<\/?[a-zA-Z][^>]*>|<)/g;var
pr_commentPrefix=/^<!--/;var pr_cdataPrefix=/^<\[CDATA\[/;var pr_brPrefix=/^<br\b/i;var
pr_tagNameRe=/^<(\/?)([a-zA-Z]+)/;function extractTags(s){var matches=s.match(pr_chunkPattern);var
sourceBuf=[];var sourceBufLen=0;var extractedTags=[];if(matches){for(var i=0,n=matches.length;i<n;++i){var
match=matches[i];if(match.length>1&&match.charAt(0)==='<'){if(pr_commentPrefix.test(match)){continue;}if(pr_cdataPrefix.test(match)){sourceBuf.push(match.substring(9,match.length-3));sourceBufLen+=match.length-12;}else
if(pr_brPrefix.test(match)){sourceBuf.push('\n');++sourceBufLen;}else{if(match.indexOf(PR_NOCODE)>=0&&isNoCodeTag(match)){var
name=(match.match(pr_tagNameRe))[2];var depth=1;end_tag_loop:for(var j=i+1;j<n;++j){var
name2=matches[j].match(pr_tagNameRe);if(name2&&name2[2]===name){if(name2[1]==='/'){if(--depth===0){break end_tag_loop;}}else{++depth;}}}if(j<n){extractedTags.push(sourceBufLen,matches.slice(i,j+1).join(''));i=j;}else{extractedTags.push(sourceBufLen,match);}}else{extractedTags.push(sourceBufLen,match);}}}else{var
literalText=htmlToText(match);sourceBuf.push(literalText);sourceBufLen+=literalText.length;}}}return{'source':sourceBuf.join(''),'tags':extractedTags};}function
isNoCodeTag(tag){return!(!tag.replace(/\s(\w+)\s*=\s*(?:\"([^\"]*)\"|'([^\']*)'|(\S+))/g,' $1=\"$2$3$4\"').match(/[cC][lL][aA][sS][sS]=\"[^\"]*\bnocode\b/));}function
createSimpleLexer(shortcutStylePatterns,fallthroughStylePatterns){var shortcuts={};(function(){var
allPatterns=shortcutStylePatterns.concat(fallthroughStylePatterns);for(var i=allPatterns.length;--i>=0;){var
patternParts=allPatterns[i];var shortcutChars=patternParts[3];if(shortcutChars){for(var
c=shortcutChars.length;--c>=0;){shortcuts[shortcutChars.charAt(c)]=patternParts;}}}})();var
nPatterns=fallthroughStylePatterns.length;var notWs=/\S/;return function(sourceCode,opt_basePos){opt_basePos=opt_basePos||0;var
decorations=[opt_basePos,PR_PLAIN];var lastToken='';var pos=0;var tail=sourceCode;while(tail.length){var
style;var token=null;var match;var patternParts=shortcuts[tail.charAt(0)];if(patternParts){match=tail.match(patternParts[1]);token=match[0];style=patternParts[0];}else{for(var
i=0;i<nPatterns;++i){patternParts=fallthroughStylePatterns[i];var contextPattern=patternParts[2];if(contextPattern&&!contextPattern.test(lastToken)){continue;}match=tail.match(patternParts[1]);if(match){token=match[0];style=patternParts[0];break;}}if(!token){style=PR_PLAIN;token=tail.substring(0,1);}}decorations.push(opt_basePos+pos,style);pos+=token.length;tail=tail.substring(token.length);if(style!==PR_COMMENT&&notWs.test(token)){lastToken=token;}}return decorations;};}var
PR_MARKUP_LEXER=createSimpleLexer([],[[PR_PLAIN,/^[^<]+/,null],[PR_DECLARATION,/^<!\w[^>]*(?:>|$)/,null],[PR_COMMENT,/^<!--[\s\S]*?(?:-->|$)/,null],[PR_SOURCE,/^<\?[\s\S]*?(?:\?>|$)/,null],[PR_SOURCE,/^<%[\s\S]*?(?:%>|$)/,null],[PR_SOURCE,/^<(script|style|xmp)\b[^>]*>[\s\S]*?<\/\1\b[^>]*>/i,null],[PR_TAG,/^<\/?\w[^<>]*>/,null]]);var
PR_SOURCE_CHUNK_PARTS=/^(<[^>]*>)([\s\S]*)(<\/[^>]*>)$/;function tokenizeMarkup(source){var
decorations=PR_MARKUP_LEXER(source);for(var i=0;i<decorations.length;i+=2){if(decorations[i+1]===PR_SOURCE){var
start,end;start=decorations[i];end=i+2<decorations.length?decorations[i+2]:source.length;var
sourceChunk=source.substring(start,end);var match=sourceChunk.match(PR_SOURCE_CHUNK_PARTS);if(match){decorations.splice(i,2,start,PR_TAG,start+match[1].length,PR_SOURCE,start+match[1].length+(match[2]||'').length,PR_TAG);}}}return decorations;}var
PR_TAG_LEXER=createSimpleLexer([[PR_ATTRIB_VALUE,/^\'[^\']*(?:\'|$)/,null,'\''],[PR_ATTRIB_VALUE,/^\"[^\"]*(?:\"|$)/,null,'\"'],[PR_PUNCTUATION,/^[<>\/=]+/,null,'<>/=']],[[PR_TAG,/^[\w:\-]+/,/^</],[PR_ATTRIB_VALUE,/^[\w\-]+/,/^=/],[PR_ATTRIB_NAME,/^[\w:\-]+/,null],[PR_PLAIN,/^\s+/,null,' 	\r\n']]);function
splitTagAttributes(source,decorations){for(var i=0;i<decorations.length;i+=2){var
style=decorations[i+1];if(style===PR_TAG){var start,end;start=decorations[i];end=i+2<decorations.length?decorations[i+2]:source.length;var
chunk=source.substring(start,end);var subDecorations=PR_TAG_LEXER(chunk,start);spliceArrayInto(subDecorations,decorations,i,2);i+=subDecorations.length-2;}}return decorations;}function
sourceDecorator(options){var shortcutStylePatterns=[],fallthroughStylePatterns=[];if(options.tripleQuotedStrings){shortcutStylePatterns.push([PR_STRING,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,'\'\"']);}else
if(options.multiLineStrings){shortcutStylePatterns.push([PR_STRING,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,'\'\"`']);}else{shortcutStylePatterns.push([PR_STRING,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,'\"\'']);}fallthroughStylePatterns.push([PR_PLAIN,/^(?:[^\'\"\`\/\#]+)/,null,' \r\n']);if(options.hashComments){shortcutStylePatterns.push([PR_COMMENT,/^#[^\r\n]*/,null,'#']);}if(options.cStyleComments){fallthroughStylePatterns.push([PR_COMMENT,/^\/\/[^\r\n]*/,null]);fallthroughStylePatterns.push([PR_COMMENT,/^\/\*[\s\S]*?(?:\*\/|$)/,null]);}if(options.regexLiterals){var
REGEX_LITERAL='^/(?=[^/*])'+'(?:[^/\\x5B\\x5C]'+'|\\x5C[\\s\\S]'+'|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+'+'(?:/|$)';fallthroughStylePatterns.push([PR_STRING,new
RegExp(REGEX_LITERAL),REGEXP_PRECEDER_PATTERN]);}var keywords=wordSet(options.keywords);options=null;var
splitStringAndCommentTokens=createSimpleLexer(shortcutStylePatterns,fallthroughStylePatterns);var
styleLiteralIdentifierPuncRecognizer=createSimpleLexer([],[[PR_PLAIN,/^\s+/,null,' \r\n'],[PR_PLAIN,/^[a-z_$@][a-z_$@0-9]*/i,null],[PR_LITERAL,/^0x[a-f0-9]+[a-z]/i,null],[PR_LITERAL,/^(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d+)(?:e[+\-]?\d+)?[a-z]*/i,null,'123456789'],[PR_PUNCTUATION,/^[^\s\w\.$@]+/,null]]);function
splitNonStringNonCommentTokens(source,decorations){for(var i=0;i<decorations.length;i+=2){var
style=decorations[i+1];if(style===PR_PLAIN){var start,end,chunk,subDecs;start=decorations[i];end=i+2<decorations.length?decorations[i+2]:source.length;chunk=source.substring(start,end);subDecs=styleLiteralIdentifierPuncRecognizer(chunk,start);for(var
j=0,m=subDecs.length;j<m;j+=2){var subStyle=subDecs[j+1];if(subStyle===PR_PLAIN){var
subStart=subDecs[j];var subEnd=j+2<m?subDecs[j+2]:chunk.length;var token=source.substring(subStart,subEnd);if(token==='.'){subDecs[j+1]=PR_PUNCTUATION;}else
if(token in keywords){subDecs[j+1]=PR_KEYWORD;}else if(/^@?[A-Z][A-Z$]*[a-z][A-Za-z$]*$/.test(token)){subDecs[j+1]=token.charAt(0)==='@'?PR_LITERAL:PR_TYPE;}}}spliceArrayInto(subDecs,decorations,i,2);i+=subDecs.length-2;}}return decorations;}return function(sourceCode){var
decorations=splitStringAndCommentTokens(sourceCode);decorations=splitNonStringNonCommentTokens(sourceCode,decorations);return decorations;};}var
decorateSource=sourceDecorator({'keywords':ALL_KEYWORDS,'hashComments':true,'cStyleComments':true,'multiLineStrings':true,'regexLiterals':true});function
splitSourceNodes(source,decorations){for(var i=0;i<decorations.length;i+=2){var style=decorations[i+1];if(style===PR_SOURCE){var
start,end;start=decorations[i];end=i+2<decorations.length?decorations[i+2]:source.length;var
subDecorations=decorateSource(source.substring(start,end));for(var j=0,m=subDecorations.length;j<m;j+=2){subDecorations[j]+=start;}spliceArrayInto(subDecorations,decorations,i,2);i+=subDecorations.length-2;}}return decorations;}function
splitSourceAttributes(source,decorations){var nextValueIsSource=false;for(var i=0;i<decorations.length;i+=2){var
style=decorations[i+1];var start,end;if(style===PR_ATTRIB_NAME){start=decorations[i];end=i+2<decorations.length?decorations[i+2]:source.length;nextValueIsSource=/^on|^style$/i.test(source.substring(start,end));}else
if(style===PR_ATTRIB_VALUE){if(nextValueIsSource){start=decorations[i];end=i+2<decorations.length?decorations[i+2]:source.length;var
attribValue=source.substring(start,end);var attribLen=attribValue.length;var quoted=attribLen>=2&&/^[\"\']/.test(attribValue)&&attribValue.charAt(0)===attribValue.charAt(attribLen-1);var
attribSource;var attribSourceStart;var attribSourceEnd;if(quoted){attribSourceStart=start+1;attribSourceEnd=end-1;attribSource=attribValue;}else{attribSourceStart=start+1;attribSourceEnd=end-1;attribSource=attribValue.substring(1,attribValue.length-1);}var
attribSourceDecorations=decorateSource(attribSource);for(var j=0,m=attribSourceDecorations.length;j<m;j+=2){attribSourceDecorations[j]+=attribSourceStart;}if(quoted){attribSourceDecorations.push(attribSourceEnd,PR_ATTRIB_VALUE);spliceArrayInto(attribSourceDecorations,decorations,i+2,0);}else{spliceArrayInto(attribSourceDecorations,decorations,i,2);}}nextValueIsSource=false;}}return decorations;}function
decorateMarkup(sourceCode){var decorations=tokenizeMarkup(sourceCode);decorations=splitTagAttributes(sourceCode,decorations);decorations=splitSourceNodes(sourceCode,decorations);decorations=splitSourceAttributes(sourceCode,decorations);return decorations;}function
recombineTagsAndDecorations(sourceText,extractedTags,decorations){var html=[];var
outputIdx=0;var openDecoration=null;var currentDecoration=null;var tagPos=0;var decPos=0;var
tabExpander=makeTabExpander(PR_TAB_WIDTH);var adjacentSpaceRe=/([\r\n ]) /g;var startOrSpaceRe=/(^| ) /gm;var
newlineRe=/\r\n?|\n/g;var trailingSpaceRe=/[ \r\n]$/;var lastWasSpace=true;function
emitTextUpTo(sourceIdx){if(sourceIdx>outputIdx){if(openDecoration&&openDecoration!==currentDecoration){html.push('</span>');openDecoration=null;}if(!openDecoration&&currentDecoration){openDecoration=currentDecoration;html.push('<span class=\"',openDecoration,'\">');}var
htmlChunk=textToHtml(tabExpander(sourceText.substring(outputIdx,sourceIdx))).replace(lastWasSpace?startOrSpaceRe:adjacentSpaceRe,'$1&nbsp;');lastWasSpace=trailingSpaceRe.test(htmlChunk);html.push(htmlChunk.replace(newlineRe,'<br />'));outputIdx=sourceIdx;}}while(true){var
outputTag;if(tagPos<extractedTags.length){if(decPos<decorations.length){outputTag=extractedTags[tagPos]<=decorations[decPos];}else{outputTag=true;}}else{outputTag=false;}if(outputTag){emitTextUpTo(extractedTags[tagPos]);if(openDecoration){html.push('</span>');openDecoration=null;}html.push(extractedTags[tagPos+1]);tagPos+=2;}else
if(decPos<decorations.length){emitTextUpTo(decorations[decPos]);currentDecoration=decorations[decPos+1];decPos+=2;}else{break;}}emitTextUpTo(sourceText.length);if(openDecoration){html.push('</span>');}return html.join('');}var
langHandlerRegistry={};function registerLangHandler(handler,fileExtensions){for(var
i=fileExtensions.length;--i>=0;){var ext=fileExtensions[i];if(!langHandlerRegistry.hasOwnProperty(ext)){langHandlerRegistry[ext]=handler;}else
if('console'in window){console.log('cannot override language handler %s',ext);}}}registerLangHandler(decorateSource,['default-code']);registerLangHandler(decorateMarkup,['default-markup','html','htm','xhtml','xml','xsl']);registerLangHandler(sourceDecorator({'keywords':CPP_KEYWORDS,'hashComments':true,'cStyleComments':true}),['c','cc','cpp','cxx','cyc']);registerLangHandler(sourceDecorator({'keywords':CSHARP_KEYWORDS,'hashComments':true,'cStyleComments':true}),['cs']);registerLangHandler(sourceDecorator({'keywords':JAVA_KEYWORDS,'cStyleComments':true}),['java']);registerLangHandler(sourceDecorator({'keywords':SH_KEYWORDS,'hashComments':true,'multiLineStrings':true}),['bsh','csh','sh']);registerLangHandler(sourceDecorator({'keywords':PYTHON_KEYWORDS,'hashComments':true,'multiLineStrings':true,'tripleQuotedStrings':true}),['cv','py']);registerLangHandler(sourceDecorator({'keywords':PERL_KEYWORDS,'hashComments':true,'multiLineStrings':true,'regexLiterals':true}),['perl','pl','pm']);registerLangHandler(sourceDecorator({'keywords':RUBY_KEYWORDS,'hashComments':true,'multiLineStrings':true,'regexLiterals':true}),['rb']);registerLangHandler(sourceDecorator({'keywords':JSCRIPT_KEYWORDS,'cStyleComments':true,'regexLiterals':true}),['js']);function
prettyPrintOne(sourceCodeHtml,opt_langExtension){try{var sourceAndExtractedTags=extractTags(sourceCodeHtml);var
source=sourceAndExtractedTags.source;var extractedTags=sourceAndExtractedTags.tags;if(!langHandlerRegistry.hasOwnProperty(opt_langExtension)){opt_langExtension=/^\s*</.test(source)?'default-markup':'default-code';}var
decorations=langHandlerRegistry[opt_langExtension].call({},source);return recombineTagsAndDecorations(source,extractedTags,decorations);}catch(e){if('console'in
window){console.log(e);console.trace();}return sourceCodeHtml;}}function prettyPrint(opt_whenDone){var
isIE6=_pr_isIE6();var codeSegments=[document.getElementsByTagName('pre'),document.getElementsByTagName('code'),document.getElementsByTagName('xmp')];var
elements=[];for(var i=0;i<codeSegments.length;++i){for(var j=0;j<codeSegments[i].length;++j){elements.push(codeSegments[i][j]);}}codeSegments=null;var
k=0;function doWork(){var endTime=PR_SHOULD_USE_CONTINUATION?new Date().getTime()+250:Infinity;for(;k<elements.length&&new
Date().getTime()<endTime;k++){var cs=elements[k];if(cs.className&&cs.className.indexOf('prettyprint')>=0){var
langExtension=cs.className.match(/\blang-(\w+)\b/);if(langExtension){langExtension=langExtension[1];}var
nested=false;for(var p=cs.parentNode;p;p=p.parentNode){if((p.tagName==='pre'||p.tagName==='code'||p.tagName==='xmp')&&p.className&&p.className.indexOf('prettyprint')>=0){nested=true;break;}}if(!nested){var
content=getInnerHtml(cs);content=content.replace(/(?:\r\n?|\n)$/,'');var newContent=prettyPrintOne(content,langExtension);if(!isRawContent(cs)){cs.innerHTML=newContent;}else{var
pre=document.createElement('PRE');for(var i=0;i<cs.attributes.length;++i){var a=cs.attributes[i];if(a.specified){var
aname=a.name.toLowerCase();if(aname==='class'){pre.className=a.value;}else{pre.setAttribute(a.name,a.value);}}}pre.innerHTML=newContent;cs.parentNode.replaceChild(pre,cs);cs=pre;}if(isIE6&&cs.tagName==='PRE'){var
lineBreaks=cs.getElementsByTagName('br');for(var j=lineBreaks.length;--j>=0;){var
lineBreak=lineBreaks[j];lineBreak.parentNode.replaceChild(document.createTextNode('\r\n'),lineBreak);}}}}}if(k<elements.length){setTimeout(doWork,250);}else
if(opt_whenDone){opt_whenDone();}}doWork();}window['PR_normalizedHtml']=normalizedHtml;window['prettyPrintOne']=prettyPrintOne;window['prettyPrint']=prettyPrint;window['PR']={'createSimpleLexer':createSimpleLexer,'registerLangHandler':registerLangHandler,'sourceDecorator':sourceDecorator,'PR_ATTRIB_NAME':PR_ATTRIB_NAME,'PR_ATTRIB_VALUE':PR_ATTRIB_VALUE,'PR_COMMENT':PR_COMMENT,'PR_DECLARATION':PR_DECLARATION,'PR_KEYWORD':PR_KEYWORD,'PR_LITERAL':PR_LITERAL,'PR_NOCODE':PR_NOCODE,'PR_PLAIN':PR_PLAIN,'PR_PUNCTUATION':PR_PUNCTUATION,'PR_SOURCE':PR_SOURCE,'PR_STRING':PR_STRING,'PR_TAG':PR_TAG,'PR_TYPE':PR_TYPE};})();}{var
testbeds=[];var BOGUS_PROXY_URL='http://bogus-proxy.google.com';var gadgetPublicApis={'keystoneKop':___.primFreeze({'f':function(){alert('You get a cookie '+[].join.call(arguments,', '));}})};if('undefined'===typeof
prettyPrintOne){prettyPrintOne=function(html){return html;};prettyPrint=function(){};}function
getCajoler(){return document.applets.cajoler;}var getTestbedServer=(function(){function
getCgiParams(){var parts=(location.search||'').split(/[\?&]/g);var params={};for(var
i=parts.length;--i>=0;){var part=parts[i];var eq=part.indexOf('=');var key,val;if(eq<0){key=decodeURIComponent(part);val='';}else{key=decodeURIComponent(part.substring(0,eq));val=decodeURIComponent(part.substring(eq+1));}(params[key]||(params[key]=[])).push(val);}return params;}var
testbedServer;return function getTestbedServer(){if(testbedServer===void 0){var backend=getCgiParams().backend;testbedServer=backend&&backend.length===1?backend[0]:BOGUS_PROXY_URL;}return testbedServer;};})();var
cajole=(function(){function loadCaja(htmlText,uiSuffix){var scriptStart=htmlText.indexOf('{');var
scriptEnd=htmlText.lastIndexOf('}');var script=htmlText.slice(scriptStart,scriptEnd+1);if(scriptStart>-1&&scriptEnd>-1){var
imports=getImports(uiSuffix);imports.clearHtml___();var stackTrace=document.getElementById('cajita-stacks'+uiSuffix);stackTrace.style.display='none';imports.exports={};if(document.getElementById('VALIJA_MODE'+uiSuffix).checked){imports.$v=valijaMaker.CALL___(imports);}___.setNewModuleHandler(imports.newModuleHandler___);try{eval(script);gadgetPublicApis['gadget'+uiSuffix]=___.primFreeze(imports.exports);}catch(ex){var
cajitaStack=ex.cajitaStack___&&___.unsealCallerStack(ex.cajitaStack___);if(cajitaStack){stackTrace.style.display='';document.getElementById('cajita-stack'+uiSuffix).appendChild(document.createTextNode(cajitaStack.join('\n')));}throw ex;}}else{typeof
console!=='undefined'&&console.warn('Failed to eval cajoled output %s',html);}}function
logToServer(msg){var logForm=document.getElementById('logForm');if(!logForm){var
testbedServer=getTestbedServer();if(testbedServer===BOGUS_PROXY_URL){return;}logForm=document.createElement('FORM');logForm.id='logForm';logForm.method='POST';logForm.action=testbedServer+'/log';var
msgInput=document.createElement('INPUT');msgInput.type='hidden';msgInput.name='msg';msgInput.id='logFormMsg';logForm.target='logFrame';var
logFrame=document.createElement('IFRAME');logFrame.name=logForm.target;logFrame.style.visibility='hidden';logFrame.width=logFrame.height='1';document.body.appendChild(logFrame);document.body.appendChild(logForm);logForm.appendChild(msgInput);}document.getElementById('logFormMsg').value=msg;logForm.submit();}function
cajole(form){var uiSuffix=form.id.replace(/^[^\.]+/,'');var inputs=form.elements;var
features=['testbedServer='+getTestbedServer().replace(/,/g,'%2C')];cajita.forOwnKeys({'EMBEDDABLE':true,'DEBUG_SYMBOLS':true,'VALIJA_MODE':true},___.frozenFunc(function(featureName){if(inputs[featureName+uiSuffix].checked){features.push(featureName);}}));features=features.join(',');var
src=inputs.src.value.replace(/^\s+|\s+$/g,'');logToServer('features:'+features+'\nsrc:'+src);var
messages='';document.getElementById('output'+uiSuffix).innerHTML='';var result=eval(String(getCajoler().cajole(src,features)));var
cajoledOutput=result[0];messages=String(result[1]);document.getElementById('messages'+uiSuffix).innerHTML=messages||'<center><i>No Messages</i></center>';if(cajoledOutput!==null){cajoledOutput=String(cajoledOutput);document.getElementById('output'+uiSuffix).innerHTML=prettyPrintOne(indentAndWrapCode(cajoledOutput));loadCaja(cajoledOutput,uiSuffix);}}return cajole;})();function
runPlain(form){var uiSuffix=form.id.replace(/^[^\.]+/,'');var src=form.elements.src.value.replace(/^\s+|\s+$/g,'');var
d=document.getElementById('ifr'+uiSuffix).contentDocument;if(!d){d=document.frames['ifr'+uiSuffix].document;}if(d){d.write(src);d.close();}}var
innerText=(function(){function innerText(node){var s=[];innerTextHelper(node,s);return s.join('');}function
innerTextHelper(node,buf){for(var child=node.firstChild;child;child=child.nextSibling){switch(child.nodeType){case
3:{buf.push(child.nodeValue);break;}case 1:if('BR'===child.nodeName){buf.push('\n');break;}default:{innerTextHelper(child,buf);break;}}}}return innerText;})();var
getImports=(function(){var importsByUiSuffix={};function typeString(o){if(typeof
o==='object'){if(o===null){return'null';}if(o===window){return'Window';}var ctor=___.directConstructor(o);var
name;if(ctor){name=ctor.NAME___;if(!name&&'name'in ctor&&!___.hasOwnProp(ctor,'name')){name=ctor.name;}if(name){return String(name);}}}return typeof
o;}function escapeOne(ch){var i=ch.charCodeAt(0);if(i<128){switch(i){case 9:return'	';case
10:return'\\n';case 13:return'\\r';case 34:return'\\\"';case 92:return'\\\\';default:return(i<16?'\\x0':'\\x')+i.toString(16);}}var
hex=i.toString(16);while(hex.length<4){hex='0'+hex;}return'\\u'+hex;}function reprKeyValuePair(els){return ___.frozenFunc(function(k,v){els.push(repr(k)+': '+repr(v));});}function
repr(o){if(o===window){return'Breach: you\'ve reached the global object';}if(Object.prototype.toSource&&typeof
o==='object'&&o!==null){return Object.prototype.toSource.call(o);}try{switch(typeof
o){case'string':return'\"'+o.replace(/[^\x20\x21\x23-\x5b\x5d-\x7f]/g,escapeOne)+'\"';case'object':;case'function':{if(o===null){break;}if(o.call&&o.apply&&o.bind){return cajita.callPub(o,'toString');}if(cajita.isJSONContainer(o)){var
els=[];if('length'in o&&!Object.prototype.propertyIsEnumerable.call(o,'length')){for(var
i=0;i<o.length;++i){els.push(repr(o[i]));}return'['+els.join(', ')+']';}else{cajita.forOwnKeys(o,reprKeyValuePair(els));return els.length?'{ '+els.join(', ')+' }':'{}';}}return'\xab'+o+'\xbb';}}return String(o);}catch(e){return'This object is recursive, so we can\'t print it correctly.';}}function
makeNewModuleHandler(imports,uiSuffix){var superHandler=___.makeNormalNewModuleHandler();superHandler.setImports(imports);var
inner=___.beget(superHandler);inner.handle=___.frozenFunc(function testbedHandle(newModule){try{return ___.callPub(superHandler,'handle',[___.frozenFunc(newModule)]);}finally{var
outcome=superHandler.getLastOutcome();var outvalue=superHandler.getLastValue();var
type=document.createElement('span');type.className='type';type.appendChild(document.createTextNode(typeString(outvalue)));var
entry=document.createElement('div');entry.className='result';entry.appendChild(type);entry.appendChild(document.createTextNode(repr(outvalue)));if(!(outcome&&outcome[0])){}document.getElementById('eval-results'+uiSuffix).appendChild(entry);}});return ___.freeze(inner);}function
getImports(uiSuffix){if(uiSuffix in importsByUiSuffix){return importsByUiSuffix[uiSuffix];}var
testImports=___.copy(___.sharedImports);if(document.getElementById('VALIJA_MODE'+uiSuffix).checked){testImports.outers=testImports;}var
idClass='xyz'+___.getId(testImports)+'___';attachDocumentStub('-'+idClass,{'rewrite':function(uri,mimeType){if(!/^https?:\/\//i.test(uri)){return null;}var
testbedServer=getTestbedServer();return testbedServer+'/proxy?url='+encodeURIComponent(uri)+'&mimeType='+encodeURIComponent(mimeType);}},testImports,document.getElementById('caja-html'+uiSuffix));testImports.clearHtml___=function(){var
htmlContainer=document.getElementById('caja-html'+uiSuffix);htmlContainer.className=idClass;htmlContainer.innerHTML='';testImports.htmlEmitter___=new
HtmlEmitter(htmlContainer);};testImports.getCssContainer___=function(){return document.getElementById('caja-html'+uiSuffix);};testImports.loadModule=___.frozenFunc(function(moduleName){moduleName=String(moduleName);return ___.canEnumPub(gadgetPublicApis,moduleName)?gadgetPublicApis[moduleName]:void
0;});testImports.alert=cajita.log;testImports.newModuleHandler___=makeNewModuleHandler(testImports,uiSuffix);return importsByUiSuffix[uiSuffix]=testImports;}return getImports;})();function
renderTemplate(domTree,domSuffix){function suffixAttrib(node,attribName){if(node.attributes[attribName]&&node.attributes[attribName].value){node.attributes[attribName].value+=domSuffix;}}function
fixNamesAndIds(node,inForm){if(node.nodeType===1){suffixAttrib(node,'id');suffixAttrib(node,'for');if(!inForm){suffixAttrib(node,'name');inForm='FORM'===node.nodeName;}}for(var
child=node.firstChild;child;child=child.nextSibling){fixNamesAndIds(child,inForm);}}domTree=domTree.cloneNode(true);fixNamesAndIds(domTree,false);return domTree;}function
registerTestbed(uiSuffix){testbeds.push(uiSuffix);}function initTestbeds(){for(var
i=0;i<testbeds.length;++i){getImports(testbeds[i]).clearHtml___();}}function loadExampleInto(containerNode,form){form.elements.src.value=innerText(containerNode);}function
indentAndWrapCode(code){function escapeHtml(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\042/g,'&quot;').replace(/ /g,'\xa0');}var
htmlOut=[];var indentStack=[0];function processLine(line){var len=line.length;var
pos=0;while(pos<len&&line.charAt(pos)==' '){++pos;}if(pos===len){htmlOut.push('<br>');return;}if(pos!==indentStack[0]){if(pos<indentStack[0]){do{indentStack.shift();htmlOut.push('</div>');}while(pos<indentStack[0]);}else
if(pos>indentStack[0]){indentStack.unshift(pos);htmlOut.push('<div class=\"indentedblock\">');}}htmlOut.push('<div class=\"line-of-code\">');var
strDelim=null;for(var i=pos;i<len;++i){var ch=line.charAt(i);switch(ch){case'\"':;case'\'':{if(strDelim===null){strDelim=ch;}else
if(strDelim===ch){strDelim=null;}break;}case'\\':{if(strDelim!==null){++i;}break;}case',':;case'(':;case')':;case'{':;case'}':;case'[':;case']':{if(strDelim===null){htmlOut.push(escapeHtml(line.substring(pos,i+1)),'<wbr>');pos=i+1;}break;}}}htmlOut.push(escapeHtml(line.substring(pos)),'</div>');}var
lines=code.split(/\r\n?|\n/g);for(var i=0,n=lines.length;i<n;++i){processLine(lines[i]);}for(var
i=indentStack.length;--i>=1;){htmlOut.push('</div>');}return htmlOut.join('');}}{{___.loadModule(function
moduleFunc___(___,IMPORTS___){var moduleResult___=___.NO_RESULT;var Array=___.readImport(IMPORTS___,'Array');var
Object=___.readImport(IMPORTS___,'Object');var ReferenceError=___.readImport(IMPORTS___,'ReferenceError',{});var
RegExp=___.readImport(IMPORTS___,'RegExp',{});var TypeError=___.readImport(IMPORTS___,'TypeError',{});var
cajita=___.readImport(IMPORTS___,'cajita',{'getFuncCategory':{'()':{}},'forAllKeys':{'()':{}},'inheritsFrom':{'()':{}},'USELESS':{},'getSuperCtor':{'()':{}},'getProtoPropertyValue':{'()':{}},'directConstructor':{'()':{}},'freeze':{'()':{}},'enforceType':{'()':{}},'getOwnPropertyNames':{'()':{}},'construct':{'()':{}},'readOwn':{'()':{}},'beget':{'()':{}},'newTable':{'()':{}},'getProtoPropertyNames':{'()':{}}});var
loader=___.readImport(IMPORTS___,'loader');var valijaMaker=(function(){function valijaMaker$_var(outers){function
disfuncToString($dis){var callFn=$dis.call_canRead___?$dis.call:___.readPub($dis,'call');if(callFn){var
printRep=callFn.toString_canCall___?callFn.toString():___.callPub(callFn,'toString',[]);var
match=FuncHeader.exec_canCall___?FuncHeader.exec(printRep):___.callPub(FuncHeader,'exec',[printRep]);if(null!==match){var
name=$dis.name_canRead___?$dis.name:___.readPub($dis,'name');if(name===void 0){name=___.readPub(match,1);}return'function '+name+'('+___.readPub(match,2)+') {\n  [cajoled code]\n}';}return printRep;}return'disfunction(var_args){\n   [cajoled code]\n}';}___.func(disfuncToString,'disfuncToString');var
x0___;var x1___;function getShadow(func){cajita.enforceType(func,'function');var
cat=cajita.getFuncCategory(func);var result=myPOE.get_canCall___?myPOE.get(cat):___.callPub(myPOE,'get',[cat]);if(void
0===result){result=cajita.beget(DisfunctionPrototype);var parentFunc=cajita.getSuperCtor(func);var
parentShadow;if(___.typeOf(parentFunc)==='function'){parentShadow=getShadow.CALL___(parentFunc);}else{parentShadow=ObjectShadow;}var
proto=cajita.beget(parentShadow.prototype_canRead___?parentShadow.prototype:___.readPub(parentShadow,'prototype'));result.prototype_canSet___?(result.prototype=proto):___.setPub(result,'prototype',proto);proto.constructor_canSet___?(proto.constructor=func):___.setPub(proto,'constructor',func);var
statics=cajita.getOwnPropertyNames(func);for(var i=0;i<(statics.length_canRead___?statics.length:___.readPub(statics,'length'));i++){var
k=___.readPub(statics,i);if(k!=='valueOf'){___.setPub(result,k,___.readPub(func,k));}}var
meths=cajita.getProtoPropertyNames(func);for(var i=0;i<(meths.length_canRead___?meths.length:___.readPub(meths,'length'));i++){var
k=___.readPub(meths,i);if(k!=='valueOf'){var v=cajita.getProtoPropertyValue(func,k);if(___.typeOf(v)==='object'&&v!==null&&___.typeOf(v.call_canRead___?v.call:___.readPub(v,'call'))==='function'){v=dis.CALL___(v.call_canRead___?v.call:___.readPub(v,'call'),k);}___.setPub(proto,k,v);}}myPOE.set_canCall___?myPOE.set(cat,result):___.callPub(myPOE,'set',[cat,result]);}return result;}___.func(getShadow,'getShadow');function
getFakeProtoOf(func){if(___.typeOf(func)==='function'){var shadow=getShadow.CALL___(func);return shadow.prototype_canRead___?shadow.prototype:___.readPub(shadow,'prototype');}else
if(___.typeOf(func)==='object'&&func!==null){return func.prototype_canRead___?func.prototype:___.readPub(func,'prototype');}else{return void
0;}}___.func(getFakeProtoOf,'getFakeProtoOf');function typeOf(obj){var result=___.typeOf(obj);if(result!=='object'){return result;}if(null===obj){return result;}if(cajita.inheritsFrom(obj,DisfunctionPrototype)){return'function';}return result;}___.func(typeOf,'typeOf');function
instanceOf(obj,func){if(___.typeOf(func)==='function'&&obj instanceof func){return true;}else{return cajita.inheritsFrom(obj,getFakeProtoOf.CALL___(func));}}___.func(instanceOf,'instanceOf');function
read(obj,name){var result=cajita.readOwn(obj,name,pumpkin);if(result!==pumpkin){return result;}if(___.typeOf(obj)==='function'){return ___.readPub(getShadow.CALL___(obj),name);}if(obj===null||obj===void
0){throw ___.construct(TypeError,['Cannot read property \"'+name+'\" from '+obj]);}if(___.inPub(name,obj)){return ___.readPub(obj,name);}var
stepParent=getFakeProtoOf.CALL___(cajita.directConstructor(obj));if(stepParent!==void
0&&___.inPub(name,stepParent)&&name!=='valueOf'){return ___.readPub(stepParent,name);}return ___.readPub(obj,name);}___.func(read,'read');function
set(obj,name,newValue){if(___.typeOf(obj)==='function'){___.setPub(getShadow.CALL___(obj),name,newValue);}else{___.setPub(obj,name,newValue);}return newValue;}___.func(set,'set');function
callFunc(func,args){var x0___;return x0___=cajita.USELESS,func.apply_canCall___?func.apply(x0___,args):___.callPub(func,'apply',[x0___,args]);}___.func(callFunc,'callFunc');function
callMethod(obj,name,args){var m=read.CALL___(obj,name);if(!m){throw ___.construct(TypeError,['callMethod: '+obj+' has no method '+name]);}return m.apply_canCall___?m.apply(obj,args):___.callPub(m,'apply',[obj,args]);}___.func(callMethod,'callMethod');function
construct(ctor,args){if(___.typeOf(ctor)==='function'){return cajita.construct(ctor,args);}var
result=cajita.beget(ctor.prototype_canRead___?ctor.prototype:___.readPub(ctor,'prototype'));var
altResult=ctor.apply_canCall___?ctor.apply(result,args):___.callPub(ctor,'apply',[result,args]);switch(___.typeOf(altResult)){case'object':{if(null!==altResult){return altResult;}break;}case'function':{return altResult;}}return result;}___.func(construct,'construct');function
dis(callFn,opt_name){var x0___;var x1___;var x2___;var x3___;cajita.enforceType(callFn,'function');var
result=cajita.beget(DisfunctionPrototype);result.call_canSet___?(result.call=callFn):___.setPub(result,'call',callFn);x0___=(function(){function
apply$_meth(self,args){var x0___;var x1___;var x2___;var x3___;return x0___=cajita.USELESS,x3___=(x1___=[self],x2___=Array.slice(args,0),x1___.concat_canCall___?x1___.concat(x2___):___.callPub(x1___,'concat',[x2___])),callFn.apply_canCall___?callFn.apply(x0___,x3___):___.callPub(callFn,'apply',[x0___,x3___]);}return ___.frozenFunc(apply$_meth,'apply$_meth');})(),result.apply_canSet___?(result.apply=x0___):___.setPub(result,'apply',x0___);x1___=cajita.beget(ObjectPrototype),result.prototype_canSet___?(result.prototype=x1___):___.setPub(result,'prototype',x1___);x2___=result.prototype_canRead___?result.prototype:___.readPub(result,'prototype'),x2___.constructor_canSet___?(x2___.constructor=result):___.setPub(x2___,'constructor',result);x3___=(callFn.length_canRead___?callFn.length:___.readPub(callFn,'length'))-1,result.length_canSet___?(result.length=x3___):___.setPub(result,'length',x3___);if(opt_name!==void
0&&opt_name!==''){result.name_canSet___?(result.name=opt_name):___.setPub(result,'name',opt_name);}return result;}___.func(dis,'dis');function
disfuncCall($dis,self,var_args){var a___=___.args(arguments);var x0___;return x0___=Array.slice(a___,2),$dis.apply_canCall___?$dis.apply(self,x0___):___.callPub($dis,'apply',[self,x0___]);}___.func(disfuncCall,'disfuncCall');var
x2___;function disfuncApply($dis,self,args){return $dis.apply_canCall___?$dis.apply(self,args):___.callPub($dis,'apply',[self,args]);}___.func(disfuncApply,'disfuncApply');var
x3___;function disfuncBind($dis,self,var_args){var a___=___.args(arguments);function
disfuncBound(var_args){var a___=___.args(arguments);var x0___;var x1___;return x1___=(x0___=Array.slice(a___,0),leftArgs.concat_canCall___?leftArgs.concat(x0___):___.callPub(leftArgs,'concat',[x0___])),$dis.apply_canCall___?$dis.apply(self,x1___):___.callPub($dis,'apply',[self,x1___]);}___.func(disfuncBound,'disfuncBound');var
leftArgs=Array.slice(a___,2);;;return ___.primFreeze(disfuncBound);}___.func(disfuncBind,'disfuncBind');var
x4___;function getOuters(){cajita.enforceType(outers,'object');return outers;}___.func(getOuters,'getOuters');function
readOuter(name){var result=cajita.readOwn(outers,name,pumpkin);if(result!==pumpkin){return result;}if(canReadRev.CALL___(name,outers)){return read.CALL___(outers,name);}else{throw ___.construct(ReferenceError,['not found: '+name]);}}___.func(readOuter,'readOuter');function
readOuterSilent(name){if(canReadRev.CALL___(name,outers)){return read.CALL___(outers,name);}else{return void
0;}}___.func(readOuterSilent,'readOuterSilent');function setOuter(name,val){return ___.setPub(outers,name,val);}___.func(setOuter,'setOuter');function
initOuter(name){if(canReadRev.CALL___(name,outers)){return;}set.CALL___(outers,name,void
0);}___.func(initOuter,'initOuter');function remove(obj,name){if(___.typeOf(obj)==='function'){var
shadow=getShadow.CALL___(obj);return ___.deletePub(shadow,name);}else{return ___.deletePub(obj,name);}}___.func(remove,'remove');function
keys(obj){var result=[];cajita.forAllKeys(obj,___.frozenFunc(function(name){result.push_canCall___?result.push(name):___.callPub(result,'push',[name]);}));cajita.forAllKeys(getSupplement.CALL___(obj),___.frozenFunc(function(name){if(!___.inPub(name,obj)&&name!=='constructor'){result.push_canCall___?result.push(name):___.callPub(result,'push',[name]);}}));return result;}___.func(keys,'keys');function
canReadRev(name,obj){if(___.inPub(name,obj)){return true;}return ___.inPub(name,getSupplement.CALL___(obj));}___.func(canReadRev,'canReadRev');function
getSupplement(obj){if(___.typeOf(obj)==='function'){return getShadow.CALL___(obj);}else{var
ctor=cajita.directConstructor(obj);return getFakeProtoOf.CALL___(ctor);}}___.func(getSupplement,'getSupplement');var
ObjectPrototype=___.initializeMap(['constructor',Object]);var DisfunctionPrototype=cajita.beget(ObjectPrototype);var
Disfunction=cajita.beget(DisfunctionPrototype);Disfunction.prototype_canSet___?(Disfunction.prototype=DisfunctionPrototype):___.setPub(Disfunction,'prototype',DisfunctionPrototype),Disfunction.length_canSet___?(Disfunction.length=1):___.setPub(Disfunction,'length',1);DisfunctionPrototype.constructor_canSet___?(DisfunctionPrototype.constructor=Disfunction):___.setPub(DisfunctionPrototype,'constructor',Disfunction);outers.Function_canSet___?(outers.Function=Disfunction):___.setPub(outers,'Function',Disfunction);var
ObjectShadow=cajita.beget(DisfunctionPrototype);ObjectShadow.prototype_canSet___?(ObjectShadow.prototype=ObjectPrototype):___.setPub(ObjectShadow,'prototype',ObjectPrototype);var
FuncHeader=___.construct(RegExp,['^\\s*function\\s*([^\\s\\(]*)\\s*\\('+'(?:\\$dis,?\\s*)?'+'([^\\)]*)\\)']);;x0___=dis.CALL___(___.primFreeze(disfuncToString),'toString'),DisfunctionPrototype.toString_canSet___?(DisfunctionPrototype.toString=x0___):___.setPub(DisfunctionPrototype,'toString',x0___);outers.Function_canSet___?(outers.Function=Disfunction):___.setPub(outers,'Function',Disfunction);var
myPOE=cajita.newTable();x1___=cajita.getFuncCategory(Object),myPOE.set_canCall___?myPOE.set(x1___,ObjectShadow):___.callPub(myPOE,'set',[x1___,ObjectShadow]);;;;;var
pumpkin=___.initializeMap([]);;;;;;;;x2___=dis.CALL___(___.primFreeze(disfuncCall),'call'),DisfunctionPrototype.call_canSet___?(DisfunctionPrototype.call=x2___):___.setPub(DisfunctionPrototype,'call',x2___);;x3___=dis.CALL___(___.primFreeze(disfuncApply),'apply'),DisfunctionPrototype.apply_canSet___?(DisfunctionPrototype.apply=x3___):___.setPub(DisfunctionPrototype,'apply',x3___);;x4___=dis.CALL___(___.primFreeze(disfuncBind),'bind'),DisfunctionPrototype.bind_canSet___?(DisfunctionPrototype.bind=x4___):___.setPub(DisfunctionPrototype,'bind',x4___);;;;;;;;;;return cajita.freeze(___.initializeMap(['typeOf',___.primFreeze(typeOf),'instanceOf',___.primFreeze(instanceOf),'r',___.primFreeze(read),'s',___.primFreeze(set),'cf',___.primFreeze(callFunc),'cm',___.primFreeze(callMethod),'construct',___.primFreeze(construct),'getOuters',___.primFreeze(getOuters),'ro',___.primFreeze(readOuter),'ros',___.primFreeze(readOuterSilent),'so',___.primFreeze(setOuter),'initOuter',___.primFreeze(initOuter),'remove',___.primFreeze(remove),'keys',___.primFreeze(keys),'canReadRev',___.primFreeze(canReadRev),'dis',___.primFreeze(dis)]));}return ___.frozenFunc(valijaMaker$_var,'valijaMaker$_var');})();if(___.typeOf(loader)!=='undefined'){moduleResult___=loader.provide_canCall___?loader.provide(valijaMaker):___.callPub(loader,'provide',[valijaMaker]);}return moduleResult___;});}}}